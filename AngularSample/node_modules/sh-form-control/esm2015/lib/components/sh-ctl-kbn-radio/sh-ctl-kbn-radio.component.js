/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output } from "@angular/core";
import { SmplKbnCodeService } from "../../services/smpl-kbn-code.service";
import { SHFormControl } from '../../utilities/ShFormControl';
export class SHCtlKbnRadioComponent extends SHFormControl {
    /**
     * @param {?} SmplKbnRadioService
     */
    constructor(SmplKbnRadioService) {
        super();
        this.SmplKbnRadioService = SmplKbnRadioService;
        this.dataKbnName = "";
        this.radioContent = "";
        this.apiUrl = "/api/";
        this.displayLabel = "";
        this.throwError = new EventEmitter();
        this.name = "";
        this.ctlName = "SHCtlKbnRadio";
    }
    /**
     * プロパティの初期化
     * 通常サービスにキャッシュしているが、無ければ再度マスタより取得
     * @return {?}
     */
    ngOnInit() {
        this.onInit();
        if (!this.items) {
            if (this.SmplKbnRadioService.getMasterData(this.apiUrl).length == 0) {
                this.SmplKbnRadioService.fetchAll(this.apiUrl).then((/**
                 * @param {?} response
                 * @return {?}
                 */
                response => {
                    this.kbnCodes = response;
                    this.SmplKbnRadioService.setMasterData(this.apiUrl, response);
                }));
            }
            else {
                if (this.SmplKbnRadioService.getMasterData(this.apiUrl).length > 0)
                    this.kbnCodes = this.SmplKbnRadioService.getMasterData(this.apiUrl);
            }
        }
        else {
            this.kbnCodes = this.items;
        }
    }
    /**
     * ngOnChanges
     * @param {?} change
     * @return {?}
     */
    ngOnChanges(change) {
        if (change.items && change.items.currentValue) {
            this.kbnCodes = change.items.currentValue;
        }
        if (change.value) {
            if (change.value.currentValue) {
                this.value = change.value.currentValue.toString();
            }
        }
    }
    /**
     * onClick
     * @param {?} event click
     * @return {?}
     */
    onClick(event) {
        this.onBeforeClick(event);
        this.onAfterClick(event);
    }
    /**
     * onChange
     * @param {?} event change
     * @return {?}
     */
    onChange(event) {
        this.onBeforeChange(event);
        this.valueChange.emit(event.value);
        setTimeout((/**
         * @return {?}
         */
        () => { this.onAfterChange(event); }), 0);
    }
    /**
     * onFocus
     * @param {?} event focus
     * @return {?}
     */
    onFocus(event) {
        this.onBeforeFocus(event);
        setTimeout((/**
         * @return {?}
         */
        () => { this.onAfterFocus(event); }), 0);
    }
    /**
     * onBlur
     * @param {?} event blur
     * @return {?}
     */
    onBlur(event) {
        this.onBeforeBlur(event);
        setTimeout((/**
         * @return {?}
         */
        () => { this.onAfterBlur(event); }), 0);
        ;
    }
    /**
     * フォーマット編集
     * @param {?} item
     * @return {?}
     */
    changeRadioContent(item) {
        this.radioContent = item;
    }
}
SHCtlKbnRadioComponent.decorators = [
    { type: Component, args: [{
                selector: "sh-ctl-kbn-radio",
                template: "<ng-container *ngIf=\"!onlyField; else onlyFieldControl\">\r\n  <div *ngIf=\"!isDisabled\" style=\"height: 52.5px;\">\r\n    <div style=\"height: 52.5px;\">\r\n      <label class=\"sh-label\">{{title}}</label>\r\n      <mat-radio-group [(ngModel)]=\"value\" [required]=\"required\" aria-label=\"Select an option\" [disabled]=\"disabled\">\r\n        <mat-radio-button *ngFor=\"let item of kbnCodes\" value=\"{{item.key}}\" attr.name=\"{{ctlName}}\"\r\n           (click)=\"onClick($event)\" (change)=\"onChange($event)\" (focus)=\"onFocus($event)\"\r\n          (blur)=\"onBlur($event)\" [ngStyle]=\"styles\" [ngClass]=\"objClass\" class=\"{{strClass}}\">\r\n          {{item.value}}</mat-radio-button>\r\n      </mat-radio-group>\r\n    </div>\r\n    <span class=\"custom-alert-message\" style=\"top:0px\">{{message.toString().split(',').join(' ')}}</span>\r\n  </div>\r\n</ng-container>\r\n\r\n<ng-template #onlyFieldControl>\r\n  <div class=\"only-field\">\r\n    <div>\r\n      <mat-radio-group [(ngModel)]=\"value\" [required]=\"required\" aria-label=\"Select an option\" [disabled]=\"disabled\">\r\n        <mat-radio-button *ngFor=\"let item of kbnCodes\" value=\"{{item.key}}\" attr.name=\"{{ctlName}}\"\r\n           (click)=\"onClick($event)\" (change)=\"onChange($event)\" (focus)=\"onFocus($event)\"\r\n          (blur)=\"onBlur($event)\" [ngStyle]=\"styles\" [ngClass]=\"objClass\" class=\"{{strClass}}\">\r\n          {{item.value}}</mat-radio-button>\r\n      </mat-radio-group>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<div *ngIf=\"isDisabled\" class=\"display-ctl-view\">\r\n  <div>\r\n    <div *ngIf=\"title\" class=\"display-ctl-view\">\r\n      <div class=\"display-result\" [ngStyle]=\"{'width.px': labelWidth}\" fxLayout=\"row wrap\" fxFlex>\r\n        <div fxFlex class=\"item-title\"><strong>{{title}}:</strong></div>\r\n      </div>\r\n      <div *ngFor=\"let item of kbnCodes;\">\r\n        <div fxFlex class=\"valueOutput\" *ngIf=\"value == item.key\">\r\n          {{item.value}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"!title\" class=\"display-ctl-view notitle-value\">\r\n      <div *ngFor=\"let item of kbnCodes;\">\r\n        <div fxFlex class=\"valueOutput\" *ngIf=\"value == item.key\">\r\n          {{item.value}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                styles: [".sh-label{font-size:.75rem;min-height:18px}.sh-radio{margin:0 10px}.display-ctl-view{display:-webkit-box;display:flex}.display-result{margin-left:30px}.valueOutput{-webkit-box-flex:1;flex:1}.mat-radio-button~.mat-radio-button{margin-left:16px}.notitle-value{width:100%;margin-left:30px}", ".sh-flex{width:100%;display:-webkit-inline-box;display:inline-flex}.sh-flex-center{-webkit-box-align:center;align-items:center}.sh-flex-between{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.display-ctl-view{margin-top:20px}.overlay{position:fixed;display:-webkit-box;display:flex;top:0;left:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;height:100%;width:100%;color:gray;background-color:rgba(0,0,0,.5);z-index:9999}.loader-text{display:block;color:#f3f3f3;margin-top:1em}.mat-dialog-content{overflow:hidden;max-height:none}.sh-dialog-content{height:85%}.sh-kbn-dialog-table-container{height:92%;overflow-y:scroll;margin-top:18px;margin-bottom:18px}.sh-dialog-table-container{display:-webkit-box;display:flex;height:83%;overflow-y:scroll;margin-top:18px;margin-bottom:18px}.sh-text-center{text-align:center}.sh-width-100{width:100%}.sh-label{display:block}.custom-alert-message{top:-20px;position:relative;font-size:.75em;color:rgba(0,0,0,.54)}.result-input,.sh-label{color:rgba(0,0,0,.87)}::ng-deep .mat-form-field-label span{color:rgba(0,0,0,.87)}::ng-deep .result-container .mat-form-field-flex{background-color:#ccdcff}.sh-ctl-state-primary::ng-deep .mat-form-field-label{color:#3f51b5}.sh-ctl-state-primary::ng-deep .mat-form-field-underline{background-color:#3f51b5}.sh-ctl-state-primary-message{color:#3f51b5}.sh-ctl-state-secondary::ng-deep .mat-form-field-label{color:#ff4081}.sh-ctl-state-secondary::ng-deep .mat-form-field-underline{background-color:#ff4081}.sh-ctl-state-secondary-message{color:#ff4081}.sh-ctl-state-success::ng-deep .mat-form-field-label{color:#0dad17}.sh-ctl-state-success::ng-deep .mat-form-field-underline{background-color:#0dad17}.sh-ctl-state-success-message{color:#0dad17}.sh-ctl-state-danger::ng-deep .mat-form-field-label{color:#f44336}.sh-ctl-state-danger::ng-deep .mat-form-field-underline{background-color:#f44336}.sh-ctl-state-danger-message{color:#f44336}.sh-ctl-state-warning::ng-deep .mat-form-field-label{color:#e29f2b}.sh-ctl-state-warning::ng-deep .mat-form-field-underline{background-color:#e29f2b}.sh-ctl-state-warning-message{color:#e29f2b}.sh-container{position:relative;width:100%;height:100%}.only-field{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:100%;height:100%;min-height:28px}.only-field input,.only-field textarea{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.only-field-danger{background-color:#f44336}.only-field-warning{background-color:#e29f2b}.only-field-success{background-color:#0dad17}::ng-deep .only-field .material-icons{font-size:13px}::ng-deep .only-field .mat-button{position:relative;width:24px;height:24px}::ng-deep .only-field .mat-icon-button{position:relative;width:24px;height:24px}::ng-deep .only-field .mat-icon{position:absolute;top:0;left:0}::ng-deep .only-field .mat-datepicker-toggle-default-icon{position:absolute;top:25%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}::ng-deep .mat-datepicker-toggle span svg{width:16px;height:16px}.only-label{background-color:#ccdcff;position:relative}.only-label mat-icon{position:absolute;top:25%;left:0;right:0;bottom:0;margin-left:auto;font-size:16px}.bind-flg__input{opacity:0;height:0;width:0;position:absolute;z-index:-100}"]
            }] }
];
/** @nocollapse */
SHCtlKbnRadioComponent.ctorParameters = () => [
    { type: SmplKbnCodeService }
];
SHCtlKbnRadioComponent.propDecorators = {
    dataKbnName: [{ type: Input }],
    radioContent: [{ type: Input }],
    apiUrl: [{ type: Input }],
    displayLabel: [{ type: Input }],
    throwError: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.dataKbnName;
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.radioContent;
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.apiUrl;
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.displayLabel;
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.throwError;
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.name;
    /** @type {?} */
    SHCtlKbnRadioComponent.prototype.kbnCodes;
    /**
     * @type {?}
     * @private
     */
    SHCtlKbnRadioComponent.prototype.SmplKbnRadioService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2gtY3RsLWtibi1yYWRpby5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zaC1mb3JtLWNvbnRyb2wvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9zaC1jdGwta2JuLXJhZGlvL3NoLWN0bC1rYm4tcmFkaW8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUE0QixNQUFNLGVBQWUsQ0FBQztBQUV6RyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUMxRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUE7QUFPN0QsTUFBTSxPQUFPLHNCQUF1QixTQUFRLGFBQXFCOzs7O0lBVS9ELFlBQW9CLG1CQUF1QztRQUN6RCxLQUFLLEVBQUUsQ0FBQztRQURVLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBb0I7UUFUM0MsZ0JBQVcsR0FBVyxFQUFFLENBQUM7UUFDekIsaUJBQVksR0FBUSxFQUFFLENBQUM7UUFDdkIsV0FBTSxHQUFXLE9BQU8sQ0FBQztRQUN6QixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUN6QixlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUUxQyxTQUFJLEdBQVcsRUFBRSxDQUFDO1FBS3ZCLElBQUksQ0FBQyxPQUFPLEdBQUcsZUFBZSxDQUFDO0lBQ2pDLENBQUM7Ozs7OztJQU1NLFFBQVE7UUFDYixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNmLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDbkUsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFD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cnQgeyBDb21wb25lbnQsIE9uSW5pdCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBTbXBsS2JuQ29kZVR5cGUgfSBmcm9tIFwiLi4vLi4vZW50aXRpZXMvU21wbEtibkNvZGVUeXBlXCI7XHJcbmltcG9ydCB7IFNtcGxLYm5Db2RlU2VydmljZSB9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9zbXBsLWtibi1jb2RlLnNlcnZpY2VcIjtcclxuaW1wb3J0IHsgU0hGb3JtQ29udHJvbCB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy9TaEZvcm1Db250cm9sJ1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6IFwic2gtY3RsLWtibi1yYWRpb1wiLFxyXG4gIHRlbXBsYXRlVXJsOiBcIi4vc2gtY3RsLWtibi1yYWRpby5jb21wb25lbnQuaHRtbFwiLFxyXG4gIHN0eWxlVXJsczogW1wiLi9zaC1jdGwta2JuLXJhZGlvLmNvbXBvbmVudC5jc3NcIiwgXCIuLi8uLi8uLi9zdHlsZS5jb21tb24uY3NzXCJdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTSEN0bEtiblJhZGlvQ29tcG9uZW50IGV4dGVuZHMgU0hGb3JtQ29udHJvbDxzdHJpbmc+IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBkYXRhS2JuTmFtZTogc3RyaW5nID0gXCJcIjtcclxuICBASW5wdXQoKSBwdWJsaWMgcmFkaW9Db250ZW50OiBhbnkgPSBcIlwiO1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBhcGlVcmw6IHN0cmluZyA9IFwiL2FwaS9cIjtcclxuICBASW5wdXQoKSBwdWJsaWMgZGlzcGxheUxhYmVsOiBzdHJpbmcgPSBcIlwiO1xyXG4gIEBPdXRwdXQoKSBwdWJsaWMgdGhyb3dFcnJvciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgcHVibGljIG5hbWU6IHN0cmluZyA9IFwiXCI7XHJcbiAgcHVibGljIGtibkNvZGVzOiBTbXBsS2JuQ29kZVR5cGVbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBTbXBsS2JuUmFkaW9TZXJ2aWNlOiBTbXBsS2JuQ29kZVNlcnZpY2UpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLmN0bE5hbWUgPSBcIlNIQ3RsS2JuUmFkaW9cIjtcclxuICB9XHJcbiBcclxuICAvKipcclxuICAgKuODl+ODreODkeODhuOCo+OBruWIneacn+WMllxyXG4gICAq6YCa5bi444K144O844OT44K544Gr44Kt44Oj44OD44K344Ol44GX44Gm44GE44KL44GM44CB54Sh44GR44KM44Gw5YaN5bqm44Oe44K544K/44KI44KK5Y+W5b6XXHJcbiAgICovXHJcbiAgcHVibGljIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5vbkluaXQoKTtcclxuICAgIGlmICghdGhpcy5pdGVtcykge1xyXG4gICAgICBpZiAodGhpcy5TbXBsS2JuUmFkaW9TZXJ2aWNlLmdldE1hc3RlckRhdGEodGhpcy5hcGlVcmwpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgdGhpcy5TbXBsS2JuUmFkaW9TZXJ2aWNlLmZldGNoQWxsKHRoaXMuYXBpVXJsKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgIHRoaXMua2JuQ29kZXMgPSByZXNwb25zZTtcclxuICAgICAgICAgIHRoaXMuU21wbEtiblJhZGlvU2VydmljZS5zZXRNYXN0ZXJEYXRhKHRoaXMuYXBpVXJsLCByZXNwb25zZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuU21wbEtiblJhZGlvU2VydmljZS5nZXRNYXN0ZXJEYXRhKHRoaXMuYXBpVXJsKS5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgdGhpcy5rYm5Db2RlcyA9IHRoaXMuU21wbEtiblJhZGlvU2VydmljZS5nZXRNYXN0ZXJEYXRhKHRoaXMuYXBpVXJsKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5rYm5Db2RlcyA9IHRoaXMuaXRlbXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBuZ09uQ2hhbmdlc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcyhjaGFuZ2U6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGlmKGNoYW5nZS5pdGVtcyAmJiBjaGFuZ2UuaXRlbXMuY3VycmVudFZhbHVlKSB7XHJcbiAgICAgIHRoaXMua2JuQ29kZXMgPSBjaGFuZ2UuaXRlbXMuY3VycmVudFZhbHVlO1xyXG4gICAgfVxyXG4gICAgaWYgKGNoYW5nZS52YWx1ZSkge1xyXG4gICAgICBpZiAoY2hhbmdlLnZhbHVlLmN1cnJlbnRWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBjaGFuZ2UudmFsdWUuY3VycmVudFZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG9uQ2xpY2tcclxuICAgKiBAcGFyYW0gZXZlbnQgY2xpY2tcclxuICAgKi9cclxuICBwdWJsaWMgb25DbGljayhldmVudCkge1xyXG4gICAgdGhpcy5vbkJlZm9yZUNsaWNrKGV2ZW50KTtcclxuXHJcbiAgICB0aGlzLm9uQWZ0ZXJDbGljayhldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkNoYW5nZVxyXG4gICAqIEBwYXJhbSBldmVudCBjaGFuZ2VcclxuICAgKi9cclxuICBwdWJsaWMgb25DaGFuZ2UoZXZlbnQ6IGFueSkge1xyXG4gICAgdGhpcy5vbkJlZm9yZUNoYW5nZShldmVudCk7XHJcblxyXG4gICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KGV2ZW50LnZhbHVlKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHt0aGlzLm9uQWZ0ZXJDaGFuZ2UoZXZlbnQpfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkZvY3VzXHJcbiAgICogQHBhcmFtIGV2ZW50IGZvY3VzXHJcbiAgICovXHJcbiAgcHVibGljIG9uRm9jdXMoZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVGb2N1cyhldmVudCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7dGhpcy5vbkFmdGVyRm9jdXMoZXZlbnQpfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkJsdXJcclxuICAgKiBAcGFyYW0gZXZlbnQgYmx1clxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkJsdXIoZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVCbHVyKGV2ZW50KTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHt0aGlzLm9uQWZ0ZXJCbHVyKGV2ZW50KTt9LCAwKTs7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDjg5Xjgqnjg7zjg57jg4Pjg4jnt6jpm4ZcclxuICAgKiBAcGFyYW0gdmFsdWUgdGhpcy52YWx1ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjaGFuZ2VSYWRpb0NvbnRlbnQoaXRlbSkge1xyXG4gICAgdGhpcy5yYWRpb0NvbnRlbnQgPSBpdGVtO1xyXG4gIH1cclxufVxyXG4iXX0=