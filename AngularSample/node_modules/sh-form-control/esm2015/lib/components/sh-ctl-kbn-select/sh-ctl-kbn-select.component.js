/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output } from "@angular/core";
import { SmplKbnCodeService } from "../../services/smpl-kbn-code.service";
import { SHFormControl } from '../../utilities/ShFormControl';
export class SHCtlKbnSelectComponent extends SHFormControl {
    /**
     * @param {?} SmplKbnSelectService
     */
    constructor(SmplKbnSelectService) {
        super();
        this.SmplKbnSelectService = SmplKbnSelectService;
        this.dataKbnName = "";
        this.selectContent = "";
        this.apiUrl = "/api/";
        this.hiddenClearButton = false;
        this.throwError = new EventEmitter();
        this.name = "";
        this.uniqueStr = "";
        this.ctlName = "SHCtlKbnSelect";
    }
    /**
     * プロパティの初期化
     * 通常サービスにキャッシュしているが、無ければ再度マスタより取得
     * @return {?}
     */
    ngOnInit() {
        this.onInit();
        if (!this.items) {
            if (this.SmplKbnSelectService.getMasterData(this.apiUrl).length == 0) {
                this.SmplKbnSelectService.fetchAll(this.apiUrl).then((/**
                 * @param {?} response
                 * @return {?}
                 */
                response => {
                    this.kbnCodes = response;
                    this.SmplKbnSelectService.setMasterData(this.apiUrl, response);
                }));
            }
            else {
                if (this.SmplKbnSelectService.getMasterData(this.apiUrl).length > 0)
                    this.kbnCodes = this.SmplKbnSelectService.getMasterData(this.apiUrl);
            }
            if (this.SmplKbnSelectService.getMasterData(this.apiUrl).length > 0)
                this.kbnCodes = this.SmplKbnSelectService.getMasterData(this.apiUrl);
        }
        else {
            this.kbnCodes = this.items;
        }
    }
    /**
     * itemsの変更検知
     * 上位コンポーネントからitemsに値が注入されているか検知し変更する
     * @param {?} change
     * @return {?}
     */
    ngOnChanges(change) {
        if (change.items) {
            if (change.items.currentValue) {
                this.kbnCodes = change.items.currentValue;
            }
        }
    }
    /**
     * onClick
     * @param {?} event click
     * @return {?}
     */
    onClick(event) {
        this.onBeforeClick(event);
        this.onAfterClick(event);
    }
    /**
     * onChange
     * @return {?}
     */
    onChange() {
        this.onBeforeChange(event);
        this.valueChange.emit(this.value);
        setTimeout((/**
         * @return {?}
         */
        () => { this.onAfterChange(event); }), 0);
    }
    /**
     * onFocus
     * @param {?} event focus
     * @return {?}
     */
    onFocus(event) {
        this.onBeforeFocus(event);
        setTimeout((/**
         * @return {?}
         */
        () => { this.onAfterFocus(event); }), 0);
    }
    /**
     * onBlur
     * @param {?} event blur
     * @return {?}
     */
    onBlur(event) {
        this.onBeforeBlur(event);
        setTimeout((/**
         * @return {?}
         */
        () => { this.onAfterBlur(event); }), 0);
        ;
    }
    /**
     * フォーマット編集
     * @param {?} item
     * @return {?}
     */
    changeSelectContent(item) {
        this.selectContent = item;
    }
    /**
     * 値のクリア
     * @return {?}
     */
    clearValue() {
        this.value = null;
        this.onChange();
    }
}
SHCtlKbnSelectComponent.decorators = [
    { type: Component, args: [{
                selector: "sh-ctl-kbn-select",
                template: "<ng-container *ngIf=\"!onlyField; else onlyFieldControl\">\r\n  <div *ngIf=\"!isDisabled\">\r\n    <mat-form-field [floatLabel]=\"floatLabel\">\r\n      <mat-label class=\"sh-label\">{{title}}</mat-label>\r\n      <mat-select #inputElm [required]=\"required\" [(ngModel)]=\"value\" (selectionChange)=\"onChange()\"\r\n        class=\"SHCtlKbnListbox h6 can-moved-with-the-enter-key  {{strClass}}\" (click)=\"onClick($event)\"\r\n        (focus)=\"onFocus($event)\" (blur)=\"onBlur($event)\" attr.name=\"{{ctlName}}\" [disabled]=\"disabled\"\r\n        [ngStyle]=\"styles\" [ngClass]=\"objClass\">\r\n        <mat-option *ngFor=\"let item of kbnCodes\" [value]=\"item.key\">\r\n          {{item.value}}\r\n        </mat-option>      \r\n      </mat-select>\r\n      <button mat-button *ngIf=\"value && !inputElm.disabled && !hiddenClearButton\" matSuffix mat-icon-button\r\n        aria-label=\"Clear\" (click)=\"clearValue();$event.stopPropagation();\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </mat-form-field>\r\n    <span class=\"custom-alert-message\">{{message.toString().split(',').join(' ')}}</span>\r\n  </div>\r\n\r\n</ng-container>\r\n<ng-template #onlyFieldControl>\r\n  <div class=\"only-field\">\r\n    <mat-select #inputElm [required]=\"required\" [(ngModel)]=\"value\" (selectionChange)=\"onChange()\"\r\n        class=\"SHCtlKbnListbox h6 can-moved-with-the-enter-key  {{strClass}}\" (click)=\"onClick($event)\"\r\n        (focus)=\"onFocus($event)\" (blur)=\"onBlur($event)\" attr.name=\"{{ctlName}}\" [disabled]=\"disabled\"\r\n        [ngStyle]=\"styles\" [ngClass]=\"objClass\">\r\n        <mat-option *ngFor=\"let item of kbnCodes\" [value]=\"item.key\">\r\n          {{item.value}}\r\n        </mat-option>      \r\n      </mat-select>\r\n      <button mat-button *ngIf=\"value && !inputElm.disabled && !hiddenClearButton\" matSuffix mat-icon-button\r\n        aria-label=\"Clear\" (click)=\"clearValue();$event.stopPropagation();\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n  </div>\r\n\r\n</ng-template>\r\n\r\n<div *ngIf=\"isDisabled\" class=\"display-ctl-view\">\r\n  <div>\r\n    <div *ngIf=\"title\" class=\"display-ctl-view\">\r\n      <div class=\"display-result\" [ngStyle]=\"{'width.px': labelWidth}\" fxLayout=\"row wrap\" fxFlex>\r\n        <div fxFlex class=\"item-title\"><strong>{{title}}:</strong></div>\r\n      </div>\r\n      <div *ngFor=\"let item of kbnCodes;\">\r\n        <div fxFlex class=\"valueOutput\" *ngIf=\"value == item.key\">\r\n          {{item.value}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"!title\" class=\"display-ctl-view notitle-value\">\r\n      <div *ngFor=\"let item of kbnCodes;\">\r\n        <div fxFlex class=\"valueOutput\" *ngIf=\"value == item.key\">\r\n          {{item.value}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                styles: [".input-group-text{background-color:#fff;border:none}.btn{border:none}.btn-primary{background-color:#17a2b8}.btn-primary:hover{background-color:#1792b8}.fixed-bottom{top:708px;height:65px;max-width:1024px;margin-right:auto;margin-left:auto}.display-ctl-view{display:-webkit-box;display:flex}.display-result{margin-left:30px}.valueOutput{-webkit-box-flex:1;flex:1}.notitle-value{width:100%;margin-left:30px}", ".sh-flex{width:100%;display:-webkit-inline-box;display:inline-flex}.sh-flex-center{-webkit-box-align:center;align-items:center}.sh-flex-between{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.display-ctl-view{margin-top:20px}.overlay{position:fixed;display:-webkit-box;display:flex;top:0;left:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;height:100%;width:100%;color:gray;background-color:rgba(0,0,0,.5);z-index:9999}.loader-text{display:block;color:#f3f3f3;margin-top:1em}.mat-dialog-content{overflow:hidden;max-height:none}.sh-dialog-content{height:85%}.sh-kbn-dialog-table-container{height:92%;overflow-y:scroll;margin-top:18px;margin-bottom:18px}.sh-dialog-table-container{display:-webkit-box;display:flex;height:83%;overflow-y:scroll;margin-top:18px;margin-bottom:18px}.sh-text-center{text-align:center}.sh-width-100{width:100%}.sh-label{display:block}.custom-alert-message{top:-20px;position:relative;font-size:.75em;color:rgba(0,0,0,.54)}.result-input,.sh-label{color:rgba(0,0,0,.87)}::ng-deep .mat-form-field-label span{color:rgba(0,0,0,.87)}::ng-deep .result-container .mat-form-field-flex{background-color:#ccdcff}.sh-ctl-state-primary::ng-deep .mat-form-field-label{color:#3f51b5}.sh-ctl-state-primary::ng-deep .mat-form-field-underline{background-color:#3f51b5}.sh-ctl-state-primary-message{color:#3f51b5}.sh-ctl-state-secondary::ng-deep .mat-form-field-label{color:#ff4081}.sh-ctl-state-secondary::ng-deep .mat-form-field-underline{background-color:#ff4081}.sh-ctl-state-secondary-message{color:#ff4081}.sh-ctl-state-success::ng-deep .mat-form-field-label{color:#0dad17}.sh-ctl-state-success::ng-deep .mat-form-field-underline{background-color:#0dad17}.sh-ctl-state-success-message{color:#0dad17}.sh-ctl-state-danger::ng-deep .mat-form-field-label{color:#f44336}.sh-ctl-state-danger::ng-deep .mat-form-field-underline{background-color:#f44336}.sh-ctl-state-danger-message{color:#f44336}.sh-ctl-state-warning::ng-deep .mat-form-field-label{color:#e29f2b}.sh-ctl-state-warning::ng-deep .mat-form-field-underline{background-color:#e29f2b}.sh-ctl-state-warning-message{color:#e29f2b}.sh-container{position:relative;width:100%;height:100%}.only-field{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:100%;height:100%;min-height:28px}.only-field input,.only-field textarea{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.only-field-danger{background-color:#f44336}.only-field-warning{background-color:#e29f2b}.only-field-success{background-color:#0dad17}::ng-deep .only-field .material-icons{font-size:13px}::ng-deep .only-field .mat-button{position:relative;width:24px;height:24px}::ng-deep .only-field .mat-icon-button{position:relative;width:24px;height:24px}::ng-deep .only-field .mat-icon{position:absolute;top:0;left:0}::ng-deep .only-field .mat-datepicker-toggle-default-icon{position:absolute;top:25%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}::ng-deep .mat-datepicker-toggle span svg{width:16px;height:16px}.only-label{background-color:#ccdcff;position:relative}.only-label mat-icon{position:absolute;top:25%;left:0;right:0;bottom:0;margin-left:auto;font-size:16px}.bind-flg__input{opacity:0;height:0;width:0;position:absolute;z-index:-100}"]
            }] }
];
/** @nocollapse */
SHCtlKbnSelectComponent.ctorParameters = () => [
    { type: SmplKbnCodeService }
];
SHCtlKbnSelectComponent.propDecorators = {
    dataKbnName: [{ type: Input }],
    selectContent: [{ type: Input }],
    apiUrl: [{ type: Input }],
    hiddenClearButton: [{ type: Input }],
    throwError: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.dataKbnName;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.selectContent;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.apiUrl;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.hiddenClearButton;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.throwError;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.name;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.event;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.kbnCodes;
    /** @type {?} */
    SHCtlKbnSelectComponent.prototype.uniqueStr;
    /**
     * @type {?}
     * @private
     */
    SHCtlKbnSelectComponent.prototype.SmplKbnSelectService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2gtY3RsLWtibi1zZWxlY3QuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vc2gtZm9ybS1jb250cm9sLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvc2gtY3RsLWtibi1zZWxlY3Qvc2gtY3RsLWtibi1zZWxlY3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUE0QixNQUFNLGVBQWUsQ0FBQztBQUV6RyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUMxRSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUE7QUFPN0QsTUFBTSxPQUFPLHVCQUF3QixTQUFRLGFBQXFCOzs7O0lBWWhFLFlBQ1Usb0JBQXdDO1FBRWhELEtBQUssRUFBRSxDQUFDO1FBRkEseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFvQjtRQVpsQyxnQkFBVyxHQUFXLEVBQUUsQ0FBQztRQUN6QixrQkFBYSxHQUFRLEVBQUUsQ0FBQztRQUN4QixXQUFNLEdBQVcsT0FBTyxDQUFDO1FBQ3pCLHNCQUFpQixHQUFZLEtBQUssQ0FBQztRQUNsQyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUUxQyxTQUFJLEdBQVcsRUFBRSxDQUFDO1FBR2xCLGNBQVMsR0FBRyxFQUFFLENBQUM7UUFNcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztJQUNsQyxDQUFDOzs7Ozs7SUFNTSxRQUFRO1FBQ2IsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDZixJQUFJLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7Z0JBQ3BFLElBQUksQ0FBQyxvQkFBb0IsQ0FB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Ozs7O0lBSlAsOENBQXlDOztJQUN6QyxnREFBd0M7O0lBQ3hDLHlDQUF5Qzs7SUFDekMsb0RBQW1EOztJQUNuRCw2Q0FBaUQ7O0lBRWpELHVDQUF5Qjs7SUFDekIsd0NBQWtCOztJQUNsQiwyQ0FBbUM7O0lBQ25DLDRDQUFzQjs7Ozs7SUFHcEIsdURBQWdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgU21wbEtibkNvZGVUeXBlIH0gZnJvbSBcIi4uLy4uL2VudGl0aWVzL1NtcGxLYm5Db2RlVHlwZVwiO1xyXG5pbXBvcnQgeyBTbXBsS2JuQ29kZVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvc21wbC1rYm4tY29kZS5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFNIRm9ybUNvbnRyb2wgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMvU2hGb3JtQ29udHJvbCdcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiBcInNoLWN0bC1rYm4tc2VsZWN0XCIsXHJcbiAgdGVtcGxhdGVVcmw6IFwiLi9zaC1jdGwta2JuLXNlbGVjdC5jb21wb25lbnQuaHRtbFwiLFxyXG4gIHN0eWxlVXJsczogW1wiLi9zaC1jdGwta2JuLXNlbGVjdC5jb21wb25lbnQuY3NzXCIsIFwiLi4vLi4vLi4vc3R5bGUuY29tbW9uLmNzc1wiXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU0hDdGxLYm5TZWxlY3RDb21wb25lbnQgZXh0ZW5kcyBTSEZvcm1Db250cm9sPHN0cmluZz4gaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBkYXRhS2JuTmFtZTogc3RyaW5nID0gXCJcIjtcclxuICBASW5wdXQoKSBwdWJsaWMgc2VsZWN0Q29udGVudDogYW55ID0gXCJcIjtcclxuICBASW5wdXQoKSBwdWJsaWMgYXBpVXJsOiBzdHJpbmcgPSBcIi9hcGkvXCI7XHJcbiAgQElucHV0KCkgcHVibGljIGhpZGRlbkNsZWFyQnV0dG9uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgQE91dHB1dCgpIHB1YmxpYyB0aHJvd0Vycm9yID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBwdWJsaWMgbmFtZTogc3RyaW5nID0gXCJcIjtcclxuICBwdWJsaWMgZXZlbnQ6IGFueTtcclxuICBwdWJsaWMga2JuQ29kZXM6IFNtcGxLYm5Db2RlVHlwZVtdO1xyXG4gIHB1YmxpYyB1bmlxdWVTdHIgPSBcIlwiO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgU21wbEtiblNlbGVjdFNlcnZpY2U6IFNtcGxLYm5Db2RlU2VydmljZSxcclxuICAgICkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY3RsTmFtZSA9IFwiU0hDdGxLYm5TZWxlY3RcIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAq44OX44Ot44OR44OG44Kj44Gu5Yid5pyf5YyWXHJcbiAgICrpgJrluLjjgrXjg7zjg5Pjgrnjgavjgq3jg6Pjg4Pjgrfjg6XjgZfjgabjgYTjgovjgYzjgIHnhKHjgZHjgozjgbDlho3luqbjg57jgrnjgr/jgojjgorlj5blvpdcclxuICAgKi9cclxuICBwdWJsaWMgbmdPbkluaXQoKSB7XHJcbiAgICB0aGlzLm9uSW5pdCgpO1xyXG4gICAgaWYgKCF0aGlzLml0ZW1zKSB7XHJcbiAgICAgIGlmICh0aGlzLlNtcGxLYm5TZWxlY3RTZXJ2aWNlLmdldE1hc3RlckRhdGEodGhpcy5hcGlVcmwpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgdGhpcy5TbXBsS2JuU2VsZWN0U2VydmljZS5mZXRjaEFsbCh0aGlzLmFwaVVybCkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmtibkNvZGVzID0gcmVzcG9uc2U7XHJcbiAgICAgICAgICB0aGlzLlNtcGxLYm5TZWxlY3RTZXJ2aWNlLnNldE1hc3RlckRhdGEodGhpcy5hcGlVcmwsIHJlc3BvbnNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5TbXBsS2JuU2VsZWN0U2VydmljZS5nZXRNYXN0ZXJEYXRhKHRoaXMuYXBpVXJsKS5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgdGhpcy5rYm5Db2RlcyA9IHRoaXMuU21wbEtiblNlbGVjdFNlcnZpY2UuZ2V0TWFzdGVyRGF0YSh0aGlzLmFwaVVybCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuU21wbEtiblNlbGVjdFNlcnZpY2UuZ2V0TWFzdGVyRGF0YSh0aGlzLmFwaVVybCkubGVuZ3RoID4gMClcclxuICAgICAgICB0aGlzLmtibkNvZGVzID0gdGhpcy5TbXBsS2JuU2VsZWN0U2VydmljZS5nZXRNYXN0ZXJEYXRhKHRoaXMuYXBpVXJsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMua2JuQ29kZXMgPSB0aGlzLml0ZW1zO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICppdGVtc+OBruWkieabtOaknOefpVxyXG4gICAq5LiK5L2N44Kz44Oz44Od44O844ON44Oz44OI44GL44KJaXRlbXPjgavlgKTjgYzms6jlhaXjgZXjgozjgabjgYTjgovjgYvmpJznn6XjgZflpInmm7TjgZnjgotcclxuICAgKi9cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2U6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGlmIChjaGFuZ2UuaXRlbXMpIHtcclxuICAgICAgaWYgKGNoYW5nZS5pdGVtcy5jdXJyZW50VmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMua2JuQ29kZXMgPSBjaGFuZ2UuaXRlbXMuY3VycmVudFZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkNsaWNrXHJcbiAgICogQHBhcmFtIGV2ZW50IGNsaWNrXHJcbiAgICovXHJcbiAgcHVibGljIG9uQ2xpY2soZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVDbGljayhldmVudCk7XHJcblxyXG4gICAgdGhpcy5vbkFmdGVyQ2xpY2soZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogb25DaGFuZ2VcclxuICAgKiBAcGFyYW0gZXZlbnQgY2hhbmdlXHJcbiAgICovXHJcbiAgcHVibGljIG9uQ2hhbmdlKCkge1xyXG4gICAgdGhpcy5vbkJlZm9yZUNoYW5nZShldmVudCk7XHJcbiAgICBcclxuICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnZhbHVlKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHt0aGlzLm9uQWZ0ZXJDaGFuZ2UoZXZlbnQpfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkZvY3VzXHJcbiAgICogQHBhcmFtIGV2ZW50IGZvY3VzXHJcbiAgICovXHJcbiAgcHVibGljIG9uRm9jdXMoZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVGb2N1cyhldmVudCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7dGhpcy5vbkFmdGVyRm9jdXMoZXZlbnQpfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkJsdXJcclxuICAgKiBAcGFyYW0gZXZlbnQgYmx1clxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkJsdXIoZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVCbHVyKGV2ZW50KTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHt0aGlzLm9uQWZ0ZXJCbHVyKGV2ZW50KTt9LCAwKTs7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDjg5Xjgqnjg7zjg57jg4Pjg4jnt6jpm4ZcclxuICAgKiBAcGFyYW0gdmFsdWUgdGhpcy52YWx1ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBjaGFuZ2VTZWxlY3RDb250ZW50KGl0ZW0pIHtcclxuICAgIHRoaXMuc2VsZWN0Q29udGVudCA9IGl0ZW07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgKTjga7jgq/jg6rjgqJcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYXJWYWx1ZSgpIHtcclxuICAgIHRoaXMudmFsdWUgPSBudWxsO1xyXG4gICAgdGhpcy5vbkNoYW5nZSgpO1xyXG4gIH1cclxuXHJcbn1cclxuIl19