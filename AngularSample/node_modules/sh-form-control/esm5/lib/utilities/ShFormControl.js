/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Input, Output, EventEmitter, ViewChild, ElementRef, } from "@angular/core";
import { SHCtlCommon } from '../components/sh-ctl-common';
import { MaxByteLengthHistory } from "./MaxByteLengthHistory";
/**
 * @template T
 */
var SHFormControl = /** @class */ (function () {
    function SHFormControl() {
        //要素コントロール名
        this.ctlName = "SHFormControl";
        //表示レイアウト切り替えフラグ(true:閲覧専用/false:編集可能)
        this.isDisabled = false;
        //値バインド変数
        this.value = null;
        //タイトル名
        this.title = " ";
        //コントロール挙動(auto/always/nevwer)
        this.floatLabel = "auto";
        //閲覧専用画面でのラベル幅(px)
        this.labelWidth = "150";
        //input要素に対するstyleの指定(形式：{ color: "red" })
        this.styles = {};
        //input要素に対するclassの指定(形式：{ "className": true } or "className className2")
        this.classes = {};
        //input要素に対する必須入力フラグ
        this.required = false;
        //input要素に対する状態の指定
        this.state = "";
        //input要素に対する文言の指定
        this.message = [""];
        //input要素に対する必須入力フラグ
        this.disabled = false;
        //値バインド結果の返却を担う
        this.valueChange = new EventEmitter();
        //BeforeClickイベント返却
        this.beforeClick = new EventEmitter();
        //AfterClickイベント返却
        this.afterClick = new EventEmitter();
        //BeforeFocusイベント返却
        this.beforeFocus = new EventEmitter();
        //AfterFocusイベント返却
        this.afterFocus = new EventEmitter();
        //BeforeBlurイベント返却
        this.beforeBlur = new EventEmitter();
        //AfterBlurイベント返却
        this.afterBlur = new EventEmitter();
        //BeforeChangeイベント返却
        this.beforeChange = new EventEmitter();
        //AfterChangeイベント返却
        this.afterChange = new EventEmitter();
        this.objClass = {};
        this.strClass = "";
        this.isComp = false;
        this.array = [];
        //forcusの保持変数
        this.isfocused = false;
        this.onlyField = false;
    }
    /**
     * @return {?}
     */
    SHFormControl.prototype.onInit = /**
     * @return {?}
     */
    function () {
        //クラスの指定方法によって分岐する
        if (typeof this.classes === "string") {
            this.strClass = this.classes;
            this.objClass = null;
        }
        else {
            this.strClass = "";
            this.objClass = this.classes;
        }
    };
    /**
     * onInput
     * @param event input
     */
    /**
     * onInput
     * @param {?} event input
     * @return {?}
     */
    SHFormControl.prototype.onInput = /**
     * onInput
     * @param {?} event input
     * @return {?}
     */
    function (event) { };
    /**
     * onKeyDown
     * @param event keydown
     */
    /**
     * onKeyDown
     * @param {?} event keydown
     * @return {?}
     */
    SHFormControl.prototype.onKeyDown = /**
     * onKeyDown
     * @param {?} event keydown
     * @return {?}
     */
    function (event) { };
    /**
     * @return {?}
     */
    SHFormControl.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        if (!this.maxByteLength)
            return;
        if (this.selfInputElm) {
            this.selfInputElm.nativeElement.addEventListener("keydown", this.handleKeydown.bind(this));
            this.selfInputElm.nativeElement.addEventListener("input", this.handleInput.bind(this));
            this.selfInputElm.nativeElement.addEventListener("compositionstart", this.handleCompositionStart.bind(this));
            this.selfInputElm.nativeElement.addEventListener("compositionend", this.handleCompositionEnd.bind(this));
        }
    };
    /**
     *maxByteLengthの制御
     */
    /**
     * maxByteLengthの制御
     * @protected
     * @param {?} e
     * @return {?}
     */
    SHFormControl.prototype.handleKeydown = /**
     * maxByteLengthの制御
     * @protected
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!this.maxByteLength)
            return;
        /** @type {?} */
        var value = e.target.value;
        if (value &&
            !this.maxByteLengthHistory &&
            !MaxByteLengthHistory.isAllowOperation(e)) {
            this.maxByteLengthHistory = new MaxByteLengthHistory(value, this.selfInputElm.nativeElement.selectionStart, this.maxByteLength);
        }
    };
    /**
     *@ あと何byte許容できるかを更新
     */
    /**
     * \@ あと何byte許容できるかを更新
     * @protected
     * @param {?} e
     * @return {?}
     */
    SHFormControl.prototype.handleInput = /**
     * \@ あと何byte許容できるかを更新
     * @protected
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!this.maxByteLength)
            return;
        this.maxlength = undefined;
        if (!this.maxByteLengthHistory && e.target.value) {
            this.maxByteLengthHistory = this.maxByteLengthHistory = new MaxByteLengthHistory(e.target.value, this.selfInputElm.nativeElement.selectionStart, this.maxByteLength);
        }
        if (this.maxByteLengthHistory) {
            this.maxByteLengthHistory.changeEnterableBytes(e.target.value);
            if (!this.maxByteLengthHistory.getEnterableBytes() && !this.isComp) {
                /** @type {?} */
                var maxLen = this.maxByteLengthHistory.getMaxLength(e.target.value);
                this.maxlength = maxLen;
                if (e.target.value.length > maxLen) {
                    e.target.value = e.target.value.substr(0, maxLen);
                    this.valueChange.emit(e.target.value);
                }
            }
        }
    };
    /**
     * @protected
     * @param {?} e
     * @return {?}
     */
    SHFormControl.prototype.handleCompositionStart = /**
     * @protected
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!this.maxByteLength)
            return;
        this.isComp = true;
        this.maxlength = undefined;
        if (e.target.value) {
            this.maxByteLengthHistory = this.maxByteLengthHistory = new MaxByteLengthHistory(e.target.value, this.selfInputElm.nativeElement.selectionStart, this.maxByteLength);
        }
        else {
            this.isComp = false;
        }
    };
    /**
     * @protected
     * @param {?} e
     * @return {?}
     */
    SHFormControl.prototype.handleCompositionEnd = /**
     * @protected
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (!this.maxByteLength)
            return;
        /** @type {?} */
        var result = this.maxByteLengthHistory.getResult(e.data, e.target.value.replace(/\n/g, '##')).replace(/##/g, '\n');
        e.target.value = result;
        this.valueChange.emit(result);
        this.maxByteLengthHistory = null;
        this.isComp = false;
    };
    /**
     * onFocusin
     * @param event focusin
     */
    /**
     * onFocusin
     * @param {?} event focusin
     * @return {?}
     */
    SHFormControl.prototype.onFocusin = /**
     * onFocusin
     * @param {?} event focusin
     * @return {?}
     */
    function (event) {
        this.isfocused = true;
    };
    /**
     * onFocusout
     * @param event focusout
     */
    /**
     * onFocusout
     * @param {?} event focusout
     * @return {?}
     */
    SHFormControl.prototype.onFocusout = /**
     * onFocusout
     * @param {?} event focusout
     * @return {?}
     */
    function (event) {
        var _this = this;
        this.isfocused = false;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (!_this.isfocused)
                _this.onBlur(event);
        }), 0);
    };
    /**
     * clickClearButton
     * @param event keydown
     */
    /**
     * clickClearButton
     * @param {?} event keydown
     * @return {?}
     */
    SHFormControl.prototype.clickClearButton = /**
     * clickClearButton
     * @param {?} event keydown
     * @return {?}
     */
    function (event) {
        var _this = this;
        if (event.keyCode == SHCtlCommon.Const.keyCodes.enter ||
            event.keyCode == SHCtlCommon.Const.keyCodes.space) {
            //エンターキーで別コントロールにフォーカスが移動しないようにフォーカスを当て直す
            setTimeout((/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var inputValue = (/** @type {?} */ (document.querySelector("textarea[name=" + _this.ctlName + "], input[name=" + _this.ctlName + "]")));
                inputValue.dispatchEvent(new Event('focus'));
            }), 0);
            this.clearValue();
            return false;
        }
    };
    /**
     * onChange
     * @param event change
     */
    /**
     * onChange
     * @param {?} event change
     * @return {?}
     */
    SHFormControl.prototype.onChange = /**
     * onChange
     * @param {?} event change
     * @return {?}
     */
    function (event) {
        this.valueChange.emit(this.value);
    };
    /**
     * onFocus
     * @param event focus
     */
    /**
     * onFocus
     * @param {?} event focus
     * @return {?}
     */
    SHFormControl.prototype.onFocus = /**
     * onFocus
     * @param {?} event focus
     * @return {?}
     */
    function (event) {
        event.target.select();
    };
    /**
     * onBlur
     * @param event blur
     */
    /**
     * onBlur
     * @param {?} event blur
     * @return {?}
     */
    SHFormControl.prototype.onBlur = /**
     * onBlur
     * @param {?} event blur
     * @return {?}
     */
    function (event) { };
    /**
     * onBeforeClick
     * @param event
     */
    /**
     * onBeforeClick
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onBeforeClick = /**
     * onBeforeClick
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.beforeClick.emit(event);
    };
    /**
     * onAfterClick
     * @param event
     */
    /**
     * onAfterClick
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onAfterClick = /**
     * onAfterClick
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.afterClick.emit(event);
    };
    /**
     * onBeforeFocus
     * @param event
     */
    /**
     * onBeforeFocus
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onBeforeFocus = /**
     * onBeforeFocus
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.beforeFocus.emit(event);
    };
    /**
     * onAfterFocus
     * @param event
     */
    /**
     * onAfterFocus
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onAfterFocus = /**
     * onAfterFocus
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.afterFocus.emit(event);
    };
    /**
     * onBeforeBlur
     * @param event
     */
    /**
     * onBeforeBlur
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onBeforeBlur = /**
     * onBeforeBlur
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.beforeBlur.emit(event);
    };
    /**
     * onAfterBlur
     * @param event
     */
    /**
     * onAfterBlur
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onAfterBlur = /**
     * onAfterBlur
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.afterBlur.emit(event);
    };
    /**
     * onBeforeChange
     * @param event
     */
    /**
     * onBeforeChange
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onBeforeChange = /**
     * onBeforeChange
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.beforeChange.emit(event);
    };
    /**
     * onAfterChange
     * @param event
     */
    /**
     * onAfterChange
     * @param {?} event
     * @return {?}
     */
    SHFormControl.prototype.onAfterChange = /**
     * onAfterChange
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.afterChange.emit(event);
    };
    /**
     * 値のクリア
     */
    /**
     * 値のクリア
     * @return {?}
     */
    SHFormControl.prototype.clearValue = /**
     * 値のクリア
     * @return {?}
     */
    function () {
        this.value = null;
        /** @type {?} */
        var inputValue = (/** @type {?} */ ((document.querySelector("textarea[name=" + this.ctlName + "], input[name=" + this.ctlName + "]"))));
        //タイミングを遅らせないとchangeイベント内のevent.target.valueが前の値になる
        setTimeout((/**
         * @return {?}
         */
        function () {
            inputValue.dispatchEvent(new Event('change'));
            inputValue.dispatchEvent(new Event('focus'));
        }), 10);
    };
    SHFormControl.propDecorators = {
        ctlName: [{ type: Input }],
        isDisabled: [{ type: Input }],
        value: [{ type: Input }],
        title: [{ type: Input }],
        floatLabel: [{ type: Input }],
        labelWidth: [{ type: Input }],
        maxlength: [{ type: Input }],
        maxByteLength: [{ type: Input }],
        styles: [{ type: Input }],
        classes: [{ type: Input }],
        required: [{ type: Input }],
        state: [{ type: Input }],
        message: [{ type: Input }],
        items: [{ type: Input }],
        disabled: [{ type: Input }],
        valueChange: [{ type: Output }],
        beforeClick: [{ type: Output }],
        afterClick: [{ type: Output }],
        beforeFocus: [{ type: Output }],
        afterFocus: [{ type: Output }],
        beforeBlur: [{ type: Output }],
        afterBlur: [{ type: Output }],
        beforeChange: [{ type: Output }],
        afterChange: [{ type: Output }],
        selfInputElm: [{ type: ViewChild, args: ["inputElm", { static: false },] }],
        onlyField: [{ type: Input }]
    };
    return SHFormControl;
}());
export { SHFormControl };
if (false) {
    /** @type {?} */
    SHFormControl.prototype.ctlName;
    /** @type {?} */
    SHFormControl.prototype.isDisabled;
    /** @type {?} */
    SHFormControl.prototype.value;
    /** @type {?} */
    SHFormControl.prototype.title;
    /** @type {?} */
    SHFormControl.prototype.floatLabel;
    /** @type {?} */
    SHFormControl.prototype.labelWidth;
    /** @type {?} */
    SHFormControl.prototype.maxlength;
    /** @type {?} */
    SHFormControl.prototype.maxByteLength;
    /** @type {?} */
    SHFormControl.prototype.styles;
    /** @type {?} */
    SHFormControl.prototype.classes;
    /** @type {?} */
    SHFormControl.prototype.required;
    /** @type {?} */
    SHFormControl.prototype.state;
    /** @type {?} */
    SHFormControl.prototype.message;
    /** @type {?} */
    SHFormControl.prototype.items;
    /** @type {?} */
    SHFormControl.prototype.disabled;
    /** @type {?} */
    SHFormControl.prototype.valueChange;
    /** @type {?} */
    SHFormControl.prototype.beforeClick;
    /** @type {?} */
    SHFormControl.prototype.afterClick;
    /** @type {?} */
    SHFormControl.prototype.beforeFocus;
    /** @type {?} */
    SHFormControl.prototype.afterFocus;
    /** @type {?} */
    SHFormControl.prototype.beforeBlur;
    /** @type {?} */
    SHFormControl.prototype.afterBlur;
    /** @type {?} */
    SHFormControl.prototype.beforeChange;
    /** @type {?} */
    SHFormControl.prototype.afterChange;
    /** @type {?} */
    SHFormControl.prototype.selfInputElm;
    /** @type {?} */
    SHFormControl.prototype.objClass;
    /** @type {?} */
    SHFormControl.prototype.strClass;
    /** @type {?} */
    SHFormControl.prototype.isComp;
    /** @type {?} */
    SHFormControl.prototype.array;
    /** @type {?} */
    SHFormControl.prototype.maxByteLengthHistory;
    /** @type {?} */
    SHFormControl.prototype.isfocused;
    /** @type {?} */
    SHFormControl.prototype.onlyField;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2hGb3JtQ29udHJvbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3NoLWZvcm0tY29udHJvbC8iLCJzb3VyY2VzIjpbImxpYi91dGlsaXRpZXMvU2hGb3JtQ29udHJvbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUNMLEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQUNaLFNBQVMsRUFDVCxVQUFVLEdBQ1gsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDOzs7O0FBRTlEO0lBZ0VFOztRQTlEZ0IsWUFBTyxHQUFXLGVBQWUsQ0FBQzs7UUFFbEMsZUFBVSxHQUFZLEtBQUssQ0FBQzs7UUFFNUIsVUFBSyxHQUFNLElBQUksQ0FBQzs7UUFFaEIsVUFBSyxHQUFHLEdBQUcsQ0FBQzs7UUFFWixlQUFVLEdBQUcsTUFBTSxDQUFDOztRQUVwQixlQUFVLEdBQUcsS0FBSyxDQUFDOztRQU1uQixXQUFNLEdBQVEsRUFBRSxDQUFDOztRQUVqQixZQUFPLEdBQVEsRUFBRSxDQUFDOztRQUVsQixhQUFRLEdBQVksS0FBSyxDQUFDOztRQUUxQixVQUFLLEdBQVcsRUFBRSxDQUFDOztRQUVuQixZQUFPLEdBQWEsQ0FBQyxFQUFFLENBQUMsQ0FBQzs7UUFJekIsYUFBUSxHQUFZLEtBQUssQ0FBQzs7UUFHekIsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDOztRQUdqQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7O1FBRWpDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDOztRQUVoQyxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7O1FBRWpDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDOztRQUVoQyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7UUFFaEMsY0FB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O0lBRXpDLDhCQUE2Qjs7SUFFN0IsaUNBQTBDOztJQUcxQyxvQ0FBa0Q7O0lBR2xELG9DQUFrRDs7SUFFbEQsbUNBQWlEOztJQUVqRCxvQ0FBa0Q7O0lBRWxELG1DQUFpRDs7SUFFakQsbUNBQWlEOztJQUVqRCxrQ0FBZ0Q7O0lBRWhELHFDQUFtRDs7SUFFbkQsb0NBQWtEOztJQUNsRCxxQ0FBcUY7O0lBRXJGLGlDQUE2Qjs7SUFDN0IsaUNBQTZCOztJQUM3QiwrQkFBc0I7O0lBQ3RCLDhCQUF5Qjs7SUFDekIsNkNBQWtEOztJQUdsRCxrQ0FBa0M7O0lBRWxDLGtDQUEyQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBWaWV3Q2hpbGQsXHJcbiAgRWxlbWVudFJlZixcclxufSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xyXG5pbXBvcnQgeyBTSEN0bENvbW1vbiB9IGZyb20gJy4uL2NvbXBvbmVudHMvc2gtY3RsLWNvbW1vbic7XHJcbmltcG9ydCB7IE1heEJ5dGVMZW5ndGhIaXN0b3J5IH0gZnJvbSBcIi4vTWF4Qnl0ZUxlbmd0aEhpc3RvcnlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTSEZvcm1Db250cm9sPFQ+IHtcclxuICAvL+imgee0oOOCs+ODs+ODiOODreODvOODq+WQjVxyXG4gIEBJbnB1dCgpIHB1YmxpYyBjdGxOYW1lOiBzdHJpbmcgPSBcIlNIRm9ybUNvbnRyb2xcIjtcclxuICAvL+ihqOekuuODrOOCpOOCouOCpuODiOWIh+OCiuabv+OBiOODleODqeOCsCh0cnVlOumWsuimp+WwgueUqC9mYWxzZTrnt6jpm4blj6/og70pXHJcbiAgQElucHV0KCkgcHVibGljIGlzRGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvL+WApOODkOOCpOODs+ODieWkieaVsFxyXG4gIEBJbnB1dCgpIHB1YmxpYyB2YWx1ZTogVCA9IG51bGw7XHJcbiAgLy/jgr/jgqTjg4jjg6vlkI1cclxuICBASW5wdXQoKSBwdWJsaWMgdGl0bGUgPSBcIiBcIjtcclxuICAvL+OCs+ODs+ODiOODreODvOODq+aMmeWLlShhdXRvL2Fsd2F5cy9uZXZ3ZXIpXHJcbiAgQElucHV0KCkgcHVibGljIGZsb2F0TGFiZWwgPSBcImF1dG9cIjtcclxuICAvL+mWsuimp+WwgueUqOeUu+mdouOBp+OBruODqeODmeODq+W5hShweClcclxuICBASW5wdXQoKSBwdWJsaWMgbGFiZWxXaWR0aCA9IFwiMTUwXCI7XHJcbiAgLy9pbnB1dOimgee0oOOBq+WvvuOBmeOCi+acgOWkp+WFpeWKm+aWh+Wtl+aVsCjoqK3lrprlj6/og73jgarjgrPjg7Pjg4jjg63jg7zjg6vjga7jgb/pgannlKgpXHJcbiAgQElucHV0KCkgcHVibGljIG1heGxlbmd0aDogbnVtYmVyO1xyXG4gIC8vaW5wdXTopoHntKDjgavlr77jgZnjgovmnIDlpKflhaXliptieXRl5pWwKOioreWumuWPr+iDveOBquOCs+ODs+ODiOODreODvOODq+OBruOBv+mBqeeUqClcclxuICBASW5wdXQoKSBwdWJsaWMgbWF4Qnl0ZUxlbmd0aDogbnVtYmVyO1xyXG4gIC8vaW5wdXTopoHntKDjgavlr77jgZnjgotzdHlsZeOBruaMh+WumijlvaLlvI/vvJp7IGNvbG9yOiBcInJlZFwiIH0pXHJcbiAgQElucHV0KCkgcHVibGljIHN0eWxlczogYW55ID0ge307XHJcbiAgLy9pbnB1dOimgee0oOOBq+WvvuOBmeOCi2NsYXNz44Gu5oyH5a6aKOW9ouW8j++8mnsgXCJjbGFzc05hbWVcIjogdHJ1ZSB9IG9yIFwiY2xhc3NOYW1lIGNsYXNzTmFtZTJcIilcclxuICBASW5wdXQoKSBwdWJsaWMgY2xhc3NlczogYW55ID0ge307XHJcbiAgLy9pbnB1dOimgee0oOOBq+WvvuOBmeOCi+W/hemgiOWFpeWKm+ODleODqeOCsFxyXG4gIEBJbnB1dCgpIHB1YmxpYyByZXF1aXJlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIC8vaW5wdXTopoHntKDjgavlr77jgZnjgovnirbmhYvjga7mjIflrppcclxuICBASW5wdXQoKSBwdWJsaWMgc3RhdGU6IHN0cmluZyA9IFwiXCI7XHJcbiAgLy9pbnB1dOimgee0oOOBq+WvvuOBmeOCi+aWh+iogOOBruaMh+WumlxyXG4gIEBJbnB1dCgpIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmdbXSA9IFtcIlwiXTtcclxuICAvL3JhZGlvLHNlbGVjdOOBq+WvvuOBmeOCi+mdnumAmuS/oeeUqOODh+ODvOOCv+OBruWPl+OBkea4oeOBl1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBpdGVtczogYW55W107XHJcbiAgLy9pbnB1dOimgee0oOOBq+WvvuOBmeOCi+W/hemgiOWFpeWKm+ODleODqeOCsFxyXG4gIEBJbnB1dCgpIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAvL+WApOODkOOCpOODs+ODiee1kOaenOOBrui/lOWNtOOCkuaLheOBhlxyXG4gIEBPdXRwdXQoKSBwdWJsaWMgdmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIC8vQmVmb3JlQ2xpY2vjgqTjg5njg7Pjg4jov5TljbRcclxuICBAT3V0cHV0KCkgcHVibGljIGJlZm9yZUNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIC8vQWZ0ZXJDbGlja+OCpOODmeODs+ODiOi/lOWNtFxyXG4gIEBPdXRwdXQoKSBwdWJsaWMgYWZ0ZXJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAvL0JlZm9yZUZvY3Vz44Kk44OZ44Oz44OI6L+U5Y20XHJcbiAgQE91dHB1dCgpIHB1YmxpYyBiZWZvcmVGb2N1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAvL0FmdGVyRm9jdXPjgqTjg5njg7Pjg4jov5TljbRcclxuICBAT3V0cHV0KCkgcHVibGljIGFmdGVyRm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgLy9CZWZvcmVCbHVy44Kk44OZ44Oz44OI6L+U5Y20XHJcbiAgQE91dHB1dCgpIHB1YmxpYyBiZWZvcmVCbHVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIC8vQWZ0ZXJCbHVy44Kk44OZ44Oz44OI6L+U5Y20XHJcbiAgQE91dHB1dCgpIHB1YmxpYyBhZnRlckJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgLy9CZWZvcmVDaGFuZ2XjgqTjg5njg7Pjg4jov5TljbRcclxuICBAT3V0cHV0KCkgcHVibGljIGJlZm9yZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAvL0FmdGVyQ2hhbmdl44Kk44OZ44Oz44OI6L+U5Y20XHJcbiAgQE91dHB1dCgpIHB1YmxpYyBhZnRlckNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBAVmlld0NoaWxkKGBpbnB1dEVsbWAsIHsgc3RhdGljOiBmYWxzZSB9KSBzZWxmSW5wdXRFbG06IEVsZW1lbnRSZWY8SFRNTElucHV0RWxlbWVudD47XHJcblxyXG4gIHB1YmxpYyBvYmpDbGFzczogb2JqZWN0ID0ge307XHJcbiAgcHVibGljIHN0ckNsYXNzOiBzdHJpbmcgPSBcIlwiO1xyXG4gIHB1YmxpYyBpc0NvbXAgPSBmYWxzZTtcclxuICBwdWJsaWMgYXJyYXk6IGFueVtdID0gW107XHJcbiAgcHVibGljIG1heEJ5dGVMZW5ndGhIaXN0b3J5OiBNYXhCeXRlTGVuZ3RoSGlzdG9yeTtcclxuICBcclxuICAvL2ZvcmN1c+OBruS/neaMgeWkieaVsFxyXG4gIHB1YmxpYyBpc2ZvY3VzZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgQElucHV0KCkgcHVibGljIG9ubHlGaWVsZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gIHB1YmxpYyBvbkluaXQoKSB7XHJcbiAgICAvL+OCr+ODqeOCueOBruaMh+WumuaWueazleOBq+OCiOOBo+OBpuWIhuWykOOBmeOCi1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNsYXNzZXMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgdGhpcy5zdHJDbGFzcyA9IHRoaXMuY2xhc3NlcztcclxuICAgICAgdGhpcy5vYmpDbGFzcyA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN0ckNsYXNzID0gXCJcIjtcclxuICAgICAgdGhpcy5vYmpDbGFzcyA9IHRoaXMuY2xhc3NlcztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG9uSW5wdXRcclxuICAgKiBAcGFyYW0gZXZlbnQgaW5wdXRcclxuICAgKi9cclxuICBwdWJsaWMgb25JbnB1dChldmVudCkge31cclxuXHJcbiAgLyoqXHJcbiAgICogb25LZXlEb3duXHJcbiAgICogQHBhcmFtIGV2ZW50IGtleWRvd25cclxuICAgKi9cclxuICBwdWJsaWMgb25LZXlEb3duKGV2ZW50KSB7fVxyXG5cclxuICBcclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICBpZiAoIXRoaXMubWF4Qnl0ZUxlbmd0aCkgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuc2VsZklucHV0RWxtKSB7XHJcbiAgICAgIHRoaXMuc2VsZklucHV0RWxtLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImtleWRvd25cIixcclxuICAgICAgICB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnNlbGZJbnB1dEVsbS5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJpbnB1dFwiLFxyXG4gICAgICAgIHRoaXMuaGFuZGxlSW5wdXQuYmluZCh0aGlzKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnNlbGZJbnB1dEVsbS5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb21wb3NpdGlvbnN0YXJ0XCIsXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDb21wb3NpdGlvblN0YXJ0LmJpbmQodGhpcylcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5zZWxmSW5wdXRFbG0ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY29tcG9zaXRpb25lbmRcIixcclxuICAgICAgICB0aGlzLmhhbmRsZUNvbXBvc2l0aW9uRW5kLmJpbmQodGhpcylcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqbWF4Qnl0ZUxlbmd0aOOBruWItuW+oVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBoYW5kbGVLZXlkb3duKGUpIHtcclxuICAgIGlmICghdGhpcy5tYXhCeXRlTGVuZ3RoKSByZXR1cm47XHJcbiAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgaWYgKFxyXG4gICAgICB2YWx1ZSAmJlxyXG4gICAgICAhdGhpcy5tYXhCeXRlTGVuZ3RoSGlzdG9yeSAmJlxyXG4gICAgICAhTWF4Qnl0ZUxlbmd0aEhpc3RvcnkuaXNBbGxvd09wZXJhdGlvbihlKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMubWF4Qnl0ZUxlbmd0aEhpc3RvcnkgPSBuZXcgTWF4Qnl0ZUxlbmd0aEhpc3RvcnkoXHJcbiAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgdGhpcy5zZWxmSW5wdXRFbG0ubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydCxcclxuICAgICAgICB0aGlzLm1heEJ5dGVMZW5ndGhcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgLyoqXHJcbiAgICpAIOOBguOBqOS9lWJ5dGXoqLHlrrnjgafjgY3jgovjgYvjgpLmm7TmlrBcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgaGFuZGxlSW5wdXQoZSkge1xyXG4gICAgaWYgKCF0aGlzLm1heEJ5dGVMZW5ndGgpIHJldHVybjtcclxuICAgIHRoaXMubWF4bGVuZ3RoID0gdW5kZWZpbmVkO1xyXG4gICAgaWYoIXRoaXMubWF4Qnl0ZUxlbmd0aEhpc3RvcnkgJiYgZS50YXJnZXQudmFsdWUpIHtcclxuICAgICAgdGhpcy5tYXhCeXRlTGVuZ3RoSGlzdG9yeSA9IHRoaXMubWF4Qnl0ZUxlbmd0aEhpc3RvcnkgPSBuZXcgTWF4Qnl0ZUxlbmd0aEhpc3RvcnkoXHJcbiAgICAgICAgZS50YXJnZXQudmFsdWUsXHJcbiAgICAgICAgdGhpcy5zZWxmSW5wdXRFbG0ubmF0aXZlRWxlbWVudC5zZWxlY3Rpb25TdGFydCxcclxuICAgICAgICB0aGlzLm1heEJ5dGVMZW5ndGhcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm1heEJ5dGVMZW5ndGhIaXN0b3J5KSB7XHJcbiAgICAgIHRoaXMubWF4Qnl0ZUxlbmd0aEhpc3RvcnkuY2hhbmdlRW50ZXJhYmxlQnl0ZXMoZS50YXJnZXQudmFsdWUpO1xyXG4gICAgICBpZiAoIXRoaXMubWF4Qnl0ZUxlbmd0aEhpc3RvcnkuZ2V0RW50ZXJhYmxlQnl0ZXMoKSAmJiAhdGhpcy5pc0NvbXApIHtcclxuICAgICAgICBjb25zdCBtYXhMZW4gPSB0aGlzLm1heEJ5dGVMZW5ndGhIaXN0b3J5LmdldE1heExlbmd0aChlLnRhcmdldC52YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5tYXhsZW5ndGggPSBtYXhMZW47XHJcbiAgICAgICAgaWYoZS50YXJnZXQudmFsdWUubGVuZ3RoID4gbWF4TGVuKSB7XHJcbiAgICAgICAgICBlLnRhcmdldC52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlLnN1YnN0cigwLCBtYXhMZW4pXHJcbiAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoZS50YXJnZXQudmFsdWUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgaGFuZGxlQ29tcG9zaXRpb25TdGFydChlKSB7XHJcbiAgICBpZiAoIXRoaXMubWF4Qnl0ZUxlbmd0aCkgcmV0dXJuO1xyXG4gICAgdGhpcy5pc0NvbXAgPSB0cnVlO1xyXG4gICAgdGhpcy5tYXhsZW5ndGggPSB1bmRlZmluZWQ7XHJcbiAgICBpZihlLnRhcmdldC52YWx1ZSkge1xyXG4gICAgICB0aGlzLm1heEJ5dGVMZW5ndGhIaXN0b3J5ID0gdGhpcy5tYXhCeXRlTGVuZ3RoSGlzdG9yeSA9IG5ldyBNYXhCeXRlTGVuZ3RoSGlzdG9yeShcclxuICAgICAgICBlLnRhcmdldC52YWx1ZSxcclxuICAgICAgICB0aGlzLnNlbGZJbnB1dEVsbS5uYXRpdmVFbGVtZW50LnNlbGVjdGlvblN0YXJ0LFxyXG4gICAgICAgIHRoaXMubWF4Qnl0ZUxlbmd0aFxyXG4gICAgICApO1xyXG4gICAgfWVsc2Uge1xyXG4gICAgICB0aGlzLmlzQ29tcCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBwcm90ZWN0ZWQgaGFuZGxlQ29tcG9zaXRpb25FbmQoZSkge1xyXG4gICAgaWYgKCF0aGlzLm1heEJ5dGVMZW5ndGgpIHJldHVybjtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubWF4Qnl0ZUxlbmd0aEhpc3RvcnkuZ2V0UmVzdWx0KFxyXG4gICAgICBlLmRhdGEsXHJcbiAgICAgIGUudGFyZ2V0LnZhbHVlLnJlcGxhY2UoL1xcbi9nLCAnIyMnKVxyXG4gICAgKS5yZXBsYWNlKC8jIy9nLCAnXFxuJyk7XHJcbiAgICBlLnRhcmdldC52YWx1ZSA9IHJlc3VsdDtcclxuICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChyZXN1bHQpO1xyXG4gICAgdGhpcy5tYXhCeXRlTGVuZ3RoSGlzdG9yeSA9IG51bGw7XHJcbiAgICB0aGlzLmlzQ29tcCA9IGZhbHNlO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBvbkZvY3VzaW5cclxuICAgKiBAcGFyYW0gZXZlbnQgZm9jdXNpblxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkZvY3VzaW4oZXZlbnQpIHtcclxuICAgIHRoaXMuaXNmb2N1c2VkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG9uRm9jdXNvdXRcclxuICAgKiBAcGFyYW0gZXZlbnQgZm9jdXNvdXRcclxuICAgKi9cclxuICBwdWJsaWMgb25Gb2N1c291dChldmVudCkge1xyXG4gICAgdGhpcy5pc2ZvY3VzZWQgPSBmYWxzZTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaXNmb2N1c2VkKSB0aGlzLm9uQmx1cihldmVudCk7XHJcbiAgICB9LCAwKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGNsaWNrQ2xlYXJCdXR0b25cclxuICAgKiBAcGFyYW0gZXZlbnQga2V5ZG93blxyXG4gICAqL1xyXG4gIHB1YmxpYyBjbGlja0NsZWFyQnV0dG9uKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBTSEN0bENvbW1vbi5Db25zdC5rZXlDb2Rlcy5lbnRlciB8fFxyXG4gICAgICBldmVudC5rZXlDb2RlID09IFNIQ3RsQ29tbW9uLkNvbnN0LmtleUNvZGVzLnNwYWNlIClcclxuICAgIHtcclxuICAgICAgLy/jgqjjg7Pjgr/jg7zjgq3jg7zjgafliKXjgrPjg7Pjg4jjg63jg7zjg6vjgavjg5Xjgqnjg7zjgqvjgrnjgYznp7vli5XjgZfjgarjgYTjgojjgYbjgavjg5Xjgqnjg7zjgqvjgrnjgpLlvZPjgabnm7TjgZlcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgbGV0IGlucHV0VmFsdWUgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGB0ZXh0YXJlYVtuYW1lPWAgKyB0aGlzLmN0bE5hbWUgKyBgXSwgaW5wdXRbbmFtZT1gICsgdGhpcy5jdGxOYW1lICsgYF1gKTtcclxuICAgICAgICBpbnB1dFZhbHVlLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdmb2N1cycpKTsgICAgICAgICAgXHJcbiAgICAgIH0sIDApO1xyXG4gICAgICB0aGlzLmNsZWFyVmFsdWUoKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvKipcclxuICAgKiBvbkNoYW5nZVxyXG4gICAqIEBwYXJhbSBldmVudCBjaGFuZ2VcclxuICAgKi9cclxuICBwdWJsaWMgb25DaGFuZ2UoZXZlbnQpIHtcclxuICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLnZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG9uRm9jdXNcclxuICAgKiBAcGFyYW0gZXZlbnQgZm9jdXNcclxuICAgKi9cclxuICBwdWJsaWMgb25Gb2N1cyhldmVudCkge1xyXG4gICAgZXZlbnQudGFyZ2V0LnNlbGVjdCgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogb25CbHVyXHJcbiAgICogQHBhcmFtIGV2ZW50IGJsdXJcclxuICAgKi9cclxuICBwdWJsaWMgb25CbHVyKGV2ZW50KSB7fVxyXG5cclxuICAvKipcclxuICAgKiBvbkJlZm9yZUNsaWNrXHJcbiAgICogQHBhcmFtIGV2ZW50XHJcbiAgICovXHJcbiAgcHVibGljIG9uQmVmb3JlQ2xpY2soZXZlbnQpIHtcclxuICAgIHRoaXMuYmVmb3JlQ2xpY2suZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkFmdGVyQ2xpY2tcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICBwdWJsaWMgb25BZnRlckNsaWNrKGV2ZW50KSB7XHJcbiAgICB0aGlzLmFmdGVyQ2xpY2suZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkJlZm9yZUZvY3VzXHJcbiAgICogQHBhcmFtIGV2ZW50XHJcbiAgICovXHJcbiAgcHVibGljIG9uQmVmb3JlRm9jdXMoZXZlbnQpIHtcclxuICAgIHRoaXMuYmVmb3JlRm9jdXMuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkFmdGVyRm9jdXNcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICBwdWJsaWMgb25BZnRlckZvY3VzKGV2ZW50KSB7XHJcbiAgICB0aGlzLmFmdGVyRm9jdXMuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkJlZm9yZUJsdXJcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICBwdWJsaWMgb25CZWZvcmVCbHVyKGV2ZW50KSB7XHJcbiAgICB0aGlzLmJlZm9yZUJsdXIuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkFmdGVyQmx1clxyXG4gICAqIEBwYXJhbSBldmVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkFmdGVyQmx1cihldmVudCkge1xyXG4gICAgdGhpcy5hZnRlckJsdXIuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkJlZm9yZUNoYW5nZVxyXG4gICAqIEBwYXJhbSBldmVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkJlZm9yZUNoYW5nZShldmVudCkge1xyXG4gICAgdGhpcy5iZWZvcmVDaGFuZ2UuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkFmdGVyQ2hhbmdlXHJcbiAgICogQHBhcmFtIGV2ZW50XHJcbiAgICovXHJcbiAgcHVibGljIG9uQWZ0ZXJDaGFuZ2UoZXZlbnQpIHtcclxuICAgIHRoaXMuYWZ0ZXJDaGFuZ2UuZW1pdChldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgKTjga7jgq/jg6rjgqJcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYXJWYWx1ZSgpIHtcclxuICAgIHRoaXMudmFsdWUgPSBudWxsO1xyXG4gICAgbGV0IGlucHV0VmFsdWUgPSA8SFRNTElucHV0RWxlbWVudD4oXHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgYHRleHRhcmVhW25hbWU9YCArIHRoaXMuY3RsTmFtZSArIGBdLCBpbnB1dFtuYW1lPWAgKyB0aGlzLmN0bE5hbWUgKyBgXWBcclxuICAgICAgKVxyXG4gICAgKTtcclxuICAgIC8v44K/44Kk44Of44Oz44Kw44KS6YGF44KJ44Gb44Gq44GE44GoY2hhbmdl44Kk44OZ44Oz44OI5YaF44GuZXZlbnQudGFyZ2V0LnZhbHVl44GM5YmN44Gu5YCk44Gr44Gq44KLXHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgIGlucHV0VmFsdWUuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2NoYW5nZScpKTtcclxuICAgICAgaW5wdXRWYWx1ZS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZm9jdXMnKSk7XHJcbiAgICB9LDEwKTsgICBcclxuXHJcbiAgfVxyXG59XHJcbiJdfQ==