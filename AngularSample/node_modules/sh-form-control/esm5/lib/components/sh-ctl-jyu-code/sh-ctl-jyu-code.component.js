/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, } from "@angular/core";
import { SHCtlCommon } from "../sh-ctl-common";
import { MatDialog } from "@angular/material";
import { SHFormPopup } from "../../utilities/ShFormPopup";
import { SmplPopupService } from "../../services/smpl-popup.service";
import { SHCtlPopupDialogComponent } from "../sh-ctl-popup-dialog/sh-ctl-popup-dialog.component";
import { ShCtlConst } from "../../constShCtl";
import { BindCtlService } from "../../services/bind-ctl.service";
import { LockScreenService } from "../../services/lock-screen.service";
var SHCtlJyuCodeComponent = /** @class */ (function (_super) {
    tslib_1.__extends(SHCtlJyuCodeComponent, _super);
    function SHCtlJyuCodeComponent(smplPopupService, dialog, bindCtlService, lockScreenService) {
        var _this = _super.call(this, smplPopupService, dialog, bindCtlService, lockScreenService) || this;
        _this.smplPopupService = smplPopupService;
        _this.dialog = dialog;
        _this.bindCtlService = bindCtlService;
        _this.lockScreenService = lockScreenService;
        _this.enabledHalfKanaInput = true;
        _this.obj = ".SHCtlJyuCode";
        _this.ctlName = "SHCtlJyuCode";
        _this.maxlength = 6;
        return _this;
    }
    /**
    * コンポーネントに値がバインドされた後で呼び出される
    * プロパティの初期化
    */
    /**
     * コンポーネントに値がバインドされた後で呼び出される
     * プロパティの初期化
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.ngOnInit = /**
     * コンポーネントに値がバインドされた後で呼び出される
     * プロパティの初期化
     * @return {?}
     */
    function () {
        this.onInit();
        if (this.popupWidth) {
            this.extendWidth = this.popupWidth;
        }
    };
    /**
     * onInput
     * @param event input
     */
    /**
     * onInput
     * @param {?} event input
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.onInput = /**
     * onInput
     * @param {?} event input
     * @return {?}
     */
    function (event) {
        event.target.value = event.target.value.replace(/[^0-9]/g, "");
        SHCtlCommon.sliceLength(event, this.maxlength);
        if (!this.enabledHalfKanaInput) {
            SHCtlCommon.replaceFullWidth(event);
        }
        event.target.value = event.target.value.replace(/["！”＃＄％＆’（）＝～｜‘｛＋＊｝＜＞？＿－＾￥＠「；：」、。・"]/g, "");
        if (event.target.value.length >= 6 &&
            event.inputType != "deleteContentBackward") {
            if (isNaN(parseInt(event.target.value)) &&
                event.target.value.length != 7) {
                return;
            }
            return;
        }
        if (event.inputType !== "insertCompositionText") {
            SHCtlCommon.replaceSpace(event);
            SHCtlCommon.replaceSign(event);
        }
    };
    /**
     * onChange
     * @param event change
     */
    /**
     * onChange
     * @param {?} event change
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.onChange = /**
     * onChange
     * @param {?} event change
     * @return {?}
     */
    function (event) {
        var _this = this;
        this.onBeforeChange(event);
        /** @type {?} */
        var flg = false;
        if (this.noChangeFlg == "OFF") {
            flg = true;
            if (this.SmplPopupService.getMasterData(this.apiUrl).length == 0 &&
                event.target.value) {
                this.fetchCodes(this.apiUrl).then((/**
                 * @param {?} value
                 * @return {?}
                 */
                function (value) {
                    _this.valueChange.emit(value);
                    event.target.value = _this.toText(event.target.value);
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.onAfterChange(event);
                    }), 0);
                }));
            }
            else {
                this.codes = Object(this.SmplPopupService.getMasterData(this.apiUrl)).data;
                event.target.value = this.setName(event.target.value);
                this.valueChange.emit(event.target.value);
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.onAfterChange(event);
                }), 0);
            }
        }
        if (!flg) {
            setTimeout((/**
             * @return {?}
             */
            function () {
                // this.noChangeFlg == `OFF`;
                setTimeout((/**
                 * @return {?}
                 */
                function () {
                    _this.noChangeFlg = "OFF";
                }), 1000);
                _this.valueChange.emit(event.target.value);
                _this.onAfterChange(event);
                event.target.value = _this.toText(event.target.value);
            }), 0);
        }
    };
    /**
     * ダイアログを開いて閉じる時に値を親に返す
     */
    /**
     * ダイアログを開いて閉じる時に値を親に返す
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.openDialog = /**
     * ダイアログを開いて閉じる時に値を親に返す
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var extendWidth;
        if (this.codes) {
            if (!this.popupWidth &&
                this.codes.length != 0 &&
                Object.values(this.codes[0]).length >= 4) {
                this.extendWidth = ShCtlConst.DIALOG_MAX_WIDTH;
            }
            /** @type {?} */
            var rawCodes = void 0;
            /** @type {?} */
            var rawCodesArray = [];
            for (var i = 0; this.codes.length > i; i++) {
                rawCodes = this.codes[i].contactCode;
                rawCodesArray.push(rawCodes);
                /** @type {?} */
                var code = Object.values(this.codes[i])[this.bindColumnKey - 1].toString()
                    .substr(2);
                this.codes[i].contactCode = code;
            }
            this.dialogRef = this.dialog.open(SHCtlPopupDialogComponent, {
                height: ShCtlConst.DIALOG_HEIGHT,
                width: extendWidth,
                data: {
                    dataTitle: this.dataTitle,
                    codes: this.codes,
                    codesHeader: this.codesHeader,
                    hiddenColumns: this.hiddenColumns,
                },
            });
            this.dialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                if (result) {
                    _this.setValueName(result);
                    _this.bindCtlService.setNoChangeFlg({
                        bindColumnArray: _this.bindColumnArray,
                        record: result,
                    });
                    _this.bindCtlService.setBindValue({
                        bindColumnArray: _this.bindColumnArray,
                        record: result,
                    });
                    _this.noChangeFlg = "ON";
                    _this.valueChange.emit(_this.extractBindValue(result));
                    _this.ownValueInputElm.dispatchEvent(new Event("change"));
                }
            }));
        }
    };
    /**
     * 選択された区分コードに紐づく区分名を設定
     */
    /**
     * 選択された区分コードに紐づく区分名を設定
     * @param {?} val
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.setName = /**
     * 選択された区分コードに紐づく区分名を設定
     * @param {?} val
     * @return {?}
     */
    function (val) {
        var _this = this;
        /** @type {?} */
        var record;
        val = this.toText(val);
        if (val.length == 6) {
            record = this.codes.find((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                return _this.toText(Object.values(element)[_this.bindColumnKey - 1]).includes(val);
            }));
        }
        if (record != null) {
            /** @type {?} */
            var name_1 = (/** @type {?} */ (Object.values(record)[this.bindColumnValue - 1]));
            if (name_1 && val.length == 6) {
                this.setValueName(record);
                this.noChangeFlg = "ON";
                this.bindCtlService.setBindValue({
                    bindColumnArray: this.bindColumnArray,
                    record: record,
                });
                this.bindCtlService.setNoChangeFlg({
                    bindColumnArray: this.bindColumnArray,
                    record: record,
                });
                val = Object.values(record)[this.bindColumnKey - 1];
                /** @type {?} */
                var inputElement_1 = this.ownValueInputElm;
                if (inputElement_1) {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        inputElement_1.value = _this.toText(val);
                    }), 0);
                }
            }
        }
        else {
            val = "";
        }
        return val;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.checkValue = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        if (!value)
            return false;
        if (value.length < 6) {
            this.clearValue();
            return false;
        }
        //let matchedArray = [];
        if (this.codes[0]) {
            /** @type {?} */
            var filterResult = this.codes.filter((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                //this.hasMatchRecords(element, value)
                return ((/** @type {?} */ (Object.values(element)[_this.bindColumnKey - 1]))).includes(value);
            }));
            if (filterResult.length == 0) {
                this.clearValue();
                return false;
            }
            if (filterResult.length >= 2) {
                alert(value + "に複数の候補が検出されました");
                this.clearValue();
                this.valueChange.emit("");
                return false;
            }
        }
        return true;
    };
    /**
     * onClick
     * @param event click
     */
    /**
     * onClick
     * @param {?} event click
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.onClick = /**
     * onClick
     * @param {?} event click
     * @return {?}
     */
    function (event) {
        this.onBeforeClick(event);
        this.onAfterClick(event);
    };
    /**
     * onFocus
     * @param event focus
     */
    /**
     * onFocus
     * @param {?} event focus
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.onFocus = /**
     * onFocus
     * @param {?} event focus
     * @return {?}
     */
    function (event) {
        var _this = this;
        this.onBeforeFocus(event);
        event.target.value = this.toText(event.target.value);
        event.target.select();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.onAfterFocus(event);
        }), 0);
    };
    /**
     * onBlur
     * @param event blur
     */
    /**
     * onBlur
     * @param {?} event blur
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.onBlur = /**
     * onBlur
     * @param {?} event blur
     * @return {?}
     */
    function (event) {
        var _this = this;
        this.onBeforeBlur(event);
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.onAfterBlur(event);
        }), 0);
    };
    /**
     * onKeyUp
     * @param event KeyUp
     */
    /**
     * onKeyUp
     * @param {?} event KeyUp
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.onKeyUp = /**
     * onKeyUp
     * @param {?} event KeyUp
     * @return {?}
     */
    function (event) {
        if (!event.isComposing) {
            event.target.value = this.toHankaku(this.hiraganaToKatagana(event.target.value));
        }
    };
    /**
     * 先頭除去
     * @param inputTargetValue event.target.value
     */
    /**
     * 先頭除去
     * @param {?} inputTargetValue event.target.value
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.toText = /**
     * 先頭除去
     * @param {?} inputTargetValue event.target.value
     * @return {?}
     */
    function (inputTargetValue) {
        if (SHCtlCommon.isBlank(inputTargetValue)) {
            return "";
        }
        if (inputTargetValue.length === 8) {
            return inputTargetValue.substr(2);
        }
        return inputTargetValue;
    };
    /**
     * ひらがなをカタカナに変換
     * @param inputValue
     */
    /**
     * ひらがなをカタカナに変換
     * @param {?} inputValue
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.hiraganaToKatagana = /**
     * ひらがなをカタカナに変換
     * @param {?} inputValue
     * @return {?}
     */
    function (inputValue) {
        return inputValue.replace(/[\u3041-\u3096]/g, (/**
         * @param {?} match
         * @return {?}
         */
        function (match) {
            /** @type {?} */
            var chr = match.charCodeAt(0) + 0x60;
            return String.fromCharCode(chr);
        }));
    };
    /**
     * 入力文字を半角カナに変換
     * @param inputValue
     */
    /**
     * 入力文字を半角カナに変換
     * @param {?} inputValue
     * @return {?}
     */
    SHCtlJyuCodeComponent.prototype.toHankaku = /**
     * 入力文字を半角カナに変換
     * @param {?} inputValue
     * @return {?}
     */
    function (inputValue) {
        /** @type {?} */
        var half = "0123456789";
        half += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        half += "abcdefghijklmnopqrstuvwxyz";
        half += "｡､｢\\｣;:･-+|_@., ";
        half += "ｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔﾕﾖﾗﾘﾙﾚﾛﾜｦﾝｧｨｩｪｫｯｬｭｮｰ";
        /** @type {?} */
        var halfArr = new Array("ｳﾞ", "ｶﾞ", "ｷﾞ", "ｸﾞ", "ｹﾞ", "ｺﾞ", "ｻﾞ", "ｼﾞ", "ｽﾞ", "ｾﾞ", "ｿﾞ", "ﾀﾞ", "ﾁﾞ", "ﾂﾞ", "ﾃﾞ", "ﾄﾞ", "ﾊﾞ", "ﾋﾞ", "ﾌﾞ", "ﾍﾞ", "ﾎﾞ", "ﾊﾟ", "ﾋﾟ", "ﾌﾟ", "ﾍﾟ", "ﾎﾟ");
        /** @type {?} */
        var full = "０１２３４５６７８９";
        full += "ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ";
        full += "ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ";
        full += "。、「￥」；：・－＋｜＿＠．，　";
        full +=
            "アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲンァィゥェォッャュョー";
        /** @type {?} */
        var fullArr = new Array("ヴ", "ガ", "ギ", "グ", "ゲ", "ゴ", "ザ", "ジ", "ズ", "ゼ", "ゾ", "ダ", "ヂ", "ヅ", "デ", "ド", "バ", "ビ", "ブ", "ベ", "ボ", "パ", "ピ", "プ", "ペ", "ポ");
        /** @type {?} */
        var str = "";
        //半角カナ用
        for (var i = 0; i < halfArr.length; i++) {
            /** @type {?} */
            var reg = new RegExp(fullArr[i], "g");
            inputValue = inputValue.replace(reg, halfArr[i]);
        }
        for (var i = 0; i < inputValue.length; i++) {
            /** @type {?} */
            var oneStr = inputValue.charAt(i);
            /** @type {?} */
            var num = full.indexOf(oneStr, 0);
            oneStr = num >= 0 ? half.charAt(num) : oneStr;
            str += oneStr;
        }
        return str;
    };
    SHCtlJyuCodeComponent.decorators = [
        { type: Component, args: [{
                    selector: "sh-ctl-jyu-code",
                    template: "<ng-container *ngIf=\"!onlyField; else onlyFieldControl\">\r\n  <div *ngIf=\"!isDisabled\" (focusin)=\"onFocusin($event)\" (focusout)=\"onFocusout($event)\">\r\n    <input class=\"bind-flg__input\" [(value)]=\"noChangeFlg\" [name]=\"noChangeFlgCtlName\" (change)=\"noChangeFlgChange($event)\"/>\r\n    <div class=\"sh-flex sh-flex-center\">\r\n      <mat-form-field style=\"width: 33.3%;\" class=\"mat-validation\" [floatLabel]=\"floatLabel\">\r\n        <input #inputElm matInput [required]=\"required\" (input)=\"onInput($event)\" (click)=\"onClick($event)\" (keyup)=\"onKeyUp($event)\"\r\n          (change)=\"onChange($event)\" [(ngModel)]=\"value\" class=\"SHCtlJyuCode can-moved-with-the-enter-key {{strClass}}\"\r\n          [disabled]=\"disabled\" (focus)=\"onFocus($event)\" maxlength=\"8\" type=\"tel\"\r\n          [placeholder]=\"title\" [ngStyle]=\"styles\" [ngClass]=\"objClass\" attr.name=\"{{ctlName}}\" />\r\n        <button mat-button *ngIf=\"inputElm.value && !inputElm.readOnly && !inputElm.disabled\" matSuffix mat-icon-button\r\n          aria-label=\"Clear\" (mousedown)=\"clearValue()\" (keydown)=\"clickClearButton($event)\">\r\n          <mat-icon>close</mat-icon>\r\n        </button>\r\n      </mat-form-field>\r\n      <mat-form-field style=\"width: 66.6%;\" class=\"result-container\">\r\n        <input class=\"result-input\" matInput type=\"tel\" [(ngModel)]=\"name\" [ngStyle]=\"styles\" [ngClass]=\"objClass\"\r\n          attr.name=\"{{popupLabelName}}\" disabled>\r\n        <mat-icon mat-button matSuffix class=\"mat-search-btn\" *ngIf=\"!inputElm.readOnly && !inputElm.disabled\"\r\n          (click)=\"getCodes()\">search</mat-icon>\r\n      </mat-form-field>\r\n    </div>\r\n    <span class=\"custom-alert-message\">{{message.toString().split(',').join(' ')}}</span>\r\n  </div>\r\n</ng-container>\r\n\r\n<ng-template #onlyFieldControl>\r\n  <div class=\"sh-flex sh-flex-center\" (focusin)=\"onFocusin($event)\" (focusout)=\"onFocusout($event)\">\r\n    <div class=\"only-field\" style=\"width: 33.3%;\">\r\n      <input #inputElm matInput [required]=\"required\" (input)=\"onInput($event)\" (click)=\"onClick($event)\" (keyup)=\"onKeyUp($event)\"\r\n        (change)=\"onChange($event)\" [(ngModel)]=\"value\" class=\"SHCtlJyuCode can-moved-with-the-enter-key {{strClass}}\" type=\"tel\"\r\n        [disabled]=\"disabled\" (focus)=\"onFocus($event)\" maxlength=\"8\"\r\n        [ngStyle]=\"styles\" [ngClass]=\"objClass\" attr.name=\"{{ctlName}}\" />\r\n      <button mat-button *ngIf=\"inputElm.value && !inputElm.readOnly && !inputElm.disabled\" matSuffix mat-icon-button\r\n        aria-label=\"Clear\" (mousedown)=\"clearValue()\" (keydown)=\"clickClearButton($event)\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n    <div class=\"only-field only-label\" style=\"width: 66.6%;\">\r\n      <input class=\"result-input\" matInput type=\"tel\" [(ngModel)]=\"name\" [ngStyle]=\"styles\" [ngClass]=\"objClass\"\r\n        attr.name=\"{{popupLabelName}}\" disabled>\r\n      <mat-icon mat-button matSuffix class=\"mat-search-btn\" *ngIf=\"!inputElm.readOnly && !inputElm.disabled\"\r\n        (click)=\"getCodes()\">search</mat-icon>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n\r\n<div *ngIf=\"isDisabled\" class=\"display-ctl-view\">\r\n  <div>\r\n    <div *ngIf=\"title\" class=\"display-ctl-view\">\r\n      <div class=\"display-result\" [ngStyle]=\"{'width.px': labelWidth}\" fxLayout=\"row wrap\" fxFlex>\r\n        <div fxFlex class=\"item-title\"><strong>{{title}}:</strong></div>\r\n      </div>\r\n      <div class=\"valueOutput-container\">\r\n        <div fxFlex class=\"valueOutput\">{{toText(value)}}</div>\r\n        <div fxFlex class=\"valueOutput-second\">{{name}}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"!title\" class=\"display-ctl-view notitle-value\">\r\n      <div class=\"valueOutput-container\">\r\n        <div fxFlex class=\"valueOutput\">{{value}}</div>\r\n        <div fxFlex class=\"valueOutput-second\">{{name}}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n",
                    styles: [".mat-search-btn{color:#bababa;font-size:1.1rem}.mat-search-btn:hover{cursor:pointer}.result-input{text-overflow:ellipsis}.display-ctl-view{display:-webkit-box;display:flex}.display-result{margin-left:30px}.valueOutput-container{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1}.valueOutput{margin-right:14px;padding-top:4px}.notitle-value{width:100%;margin-left:30px}", ".sh-flex{width:100%;display:-webkit-inline-box;display:inline-flex}.sh-flex-center{-webkit-box-align:center;align-items:center}.sh-flex-between{-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.display-ctl-view{margin-top:20px}.overlay{position:fixed;display:-webkit-box;display:flex;top:0;left:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;height:100%;width:100%;color:gray;background-color:rgba(0,0,0,.5);z-index:9999}.loader-text{display:block;color:#f3f3f3;margin-top:1em}.mat-dialog-content{overflow:hidden;max-height:none}.sh-dialog-content{height:85%}.sh-kbn-dialog-table-container{height:92%;overflow-y:scroll;margin-top:18px;margin-bottom:18px}.sh-dialog-table-container{display:-webkit-box;display:flex;height:83%;overflow-y:scroll;margin-top:18px;margin-bottom:18px}.sh-text-center{text-align:center}.sh-width-100{width:100%}.sh-label{display:block}.custom-alert-message{top:-20px;position:relative;font-size:.75em;color:rgba(0,0,0,.54)}.result-input,.sh-label{color:rgba(0,0,0,.87)}::ng-deep .mat-form-field-label span{color:rgba(0,0,0,.87)}::ng-deep .result-container .mat-form-field-flex{background-color:#ccdcff}.sh-ctl-state-primary::ng-deep .mat-form-field-label{color:#3f51b5}.sh-ctl-state-primary::ng-deep .mat-form-field-underline{background-color:#3f51b5}.sh-ctl-state-primary-message{color:#3f51b5}.sh-ctl-state-secondary::ng-deep .mat-form-field-label{color:#ff4081}.sh-ctl-state-secondary::ng-deep .mat-form-field-underline{background-color:#ff4081}.sh-ctl-state-secondary-message{color:#ff4081}.sh-ctl-state-success::ng-deep .mat-form-field-label{color:#0dad17}.sh-ctl-state-success::ng-deep .mat-form-field-underline{background-color:#0dad17}.sh-ctl-state-success-message{color:#0dad17}.sh-ctl-state-danger::ng-deep .mat-form-field-label{color:#f44336}.sh-ctl-state-danger::ng-deep .mat-form-field-underline{background-color:#f44336}.sh-ctl-state-danger-message{color:#f44336}.sh-ctl-state-warning::ng-deep .mat-form-field-label{color:#e29f2b}.sh-ctl-state-warning::ng-deep .mat-form-field-underline{background-color:#e29f2b}.sh-ctl-state-warning-message{color:#e29f2b}.sh-container{position:relative;width:100%;height:100%}.only-field{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:100%;height:100%;min-height:28px}.only-field input,.only-field textarea{font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit}.only-field-danger{background-color:#f44336}.only-field-warning{background-color:#e29f2b}.only-field-success{background-color:#0dad17}::ng-deep .only-field .material-icons{font-size:13px}::ng-deep .only-field .mat-button{position:relative;width:24px;height:24px}::ng-deep .only-field .mat-icon-button{position:relative;width:24px;height:24px}::ng-deep .only-field .mat-icon{position:absolute;top:0;left:0}::ng-deep .only-field .mat-datepicker-toggle-default-icon{position:absolute;top:25%;left:0;right:0;bottom:0;margin-left:auto;margin-right:auto}::ng-deep .mat-datepicker-toggle span svg{width:16px;height:16px}.only-label{background-color:#ccdcff;position:relative}.only-label mat-icon{position:absolute;top:25%;left:0;right:0;bottom:0;margin-left:auto;font-size:16px}.bind-flg__input{opacity:0;height:0;width:0;position:absolute;z-index:-100}"]
                }] }
    ];
    /** @nocollapse */
    SHCtlJyuCodeComponent.ctorParameters = function () { return [
        { type: SmplPopupService },
        { type: MatDialog },
        { type: BindCtlService },
        { type: LockScreenService }
    ]; };
    SHCtlJyuCodeComponent.propDecorators = {
        enabledHalfKanaInput: [{ type: Input }]
    };
    return SHCtlJyuCodeComponent;
}(SHFormPopup));
export { SHCtlJyuCodeComponent };
if (false) {
    /** @type {?} */
    SHCtlJyuCodeComponent.prototype.enabledHalfKanaInput;
    /** @type {?} */
    SHCtlJyuCodeComponent.prototype.obj;
    /**
     * @type {?}
     * @protected
     */
    SHCtlJyuCodeComponent.prototype.smplPopupService;
    /**
     * @type {?}
     * @protected
     */
    SHCtlJyuCodeComponent.prototype.dialog;
    /**
     * @type {?}
     * @protected
     */
    SHCtlJyuCodeComponent.prototype.bindCtlService;
    /**
     * @type {?}
     * @protected
     */
    SHCtlJyuCodeComponent.prototype.lockScreenService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2gtY3RsLWp5dS1jb2RlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3NoLWZvcm0tY29udHJvbC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3NoLWN0bC1qeXUtY29kZS9zaC1jdGwtanl1LWNvZGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFHVCxLQUFLLEdBQ04sTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUM5QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDckUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDakcsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUNqRSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUV2RTtJQU1VLGlEQUFXO0lBS25CLCtCQUNZLGdCQUFrQyxFQUNsQyxNQUFpQixFQUNqQixjQUE4QixFQUM5QixpQkFBb0M7UUFKaEQsWUFNRSxrQkFBTSxnQkFBZ0IsRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLGlCQUFpQixDQUFDLFNBR25FO1FBUlcsc0JBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxZQUFNLEdBQU4sTUFBTSxDQUFXO1FBQ2pCLG9CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5Qix1QkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBUHZDLDBCQUFvQixHQUFZLElBQUksQ0FBQztRQUN2QyxTQUFHLEdBQUcsZUFBZSxDQUFDO1FBUzNCLEtBQUksQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDO1FBQzlCLEtBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDOztJQUNyQixDQUFDO0lBRUE7OztNQUdFOzs7Ozs7SUFDSSx3Q0FBUTs7Ozs7SUFBZjtRQUNFLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNkLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7U0FDcEM7SUFDSCxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSSx1Q0FBTzs7Ozs7SUFBZCxVQUFlLEtBQUs7UUFDbEIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMvRCxXQUFXLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRTtZQUM5QixXQUFXLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDckM7UUFDRCxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQzdDLHVDQUF1QyxFQUN2QyxFQUFFLENBQ0gsQ0FBQztRQUNGLElBQ0UsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUM7WUFDOUIsS0FBSyxDQUFDLFNBQVMsSUFBSSx1QkFBdUIsRUFDMUM7WUFDQSxJQUNFLEtBQUssQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbkMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFDOUI7Z0JBQ0EsT0FBTzthQUNSO1lBQ0QsT0FBTztTQUNSO1FBQ0QsSUFBSSxLQUFLLENBQUMsU0FBUyxLQUFLLHVCQUF1QixFQUFFO1lBQy9DLFdBQVcsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDaEMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNoQztJQUNILENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNJLHdDQUFROzs7OztJQUFmLFVBQWdCLEtBQUs7UUFBckIsaUJBc0NDO1FBckNDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7O1lBQ3ZCLEdBQUcsR0FBRyxLQUFLO1FBQ2YsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLEtBQUssRUFBRTtZQUM3QixHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ1gsSUFDRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQztnQkFDNUQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQ2xCO2dCQUNBLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUk7Ozs7Z0JBQUMsVUFBQyxLQUFLO29CQUN0QyxLQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDN0IsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNyRCxVQUFVOzs7b0JBQUM7d0JBQ1QsS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDNUIsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNSLENBQUMsRUFBQyxDQUFDO2FBQ0o7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQ2pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUNqRCxDQUFDLElBQUksQ0FBQztnQkFDUCxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3RELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQzFDLFVBQVU7OztnQkFBQztvQkFDVCxLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUM7YUFDUDtTQUNGO1FBQ0QsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNSLFVBQVU7OztZQUFDO2dCQUNULDZCQUE2QjtnQkFDN0IsVUFBVTs7O2dCQUFDO29CQUNULEtBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO2dCQUMzQixDQUFDLEdBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQ1QsS0FBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDMUMsS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDMUIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3ZELENBQUMsR0FBRSxDQUFDLENBQUMsQ0FBQztTQUNQO0lBQ0gsQ0FBQztJQUVEOztPQUVHOzs7OztJQUNJLDBDQUFVOzs7O0lBQWpCO1FBQUEsaUJBaURDOztZQWhESyxXQUFXO1FBQ2YsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2QsSUFDRSxDQUFDLElBQUksQ0FBQyxVQUFVO2dCQUNoQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDO2dCQUN0QixNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUN4QztnQkFDQSxJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQzthQUNoRDs7Z0JBRUcsUUFBUSxTQUFBOztnQkFDUixhQUFhLEdBQUcsRUFBRTtZQUN0QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzFDLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztnQkFDckMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzs7b0JBQ3pCLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDcEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7cUJBQ2xDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ1osSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO2FBQ2xDO1lBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsRUFBRTtnQkFDM0QsTUFBTSxFQUFFLFVBQVUsQ0FBQyxhQUFhO2dCQUNoQyxLQUFLLEVBQUUsV0FBVztnQkFDbEIsSUFBSSxFQUFFO29CQUNKLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztvQkFDekIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO29CQUNqQixXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVc7b0JBQzdCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtpQkFDbEM7YUFDRixDQUFDLENBQUM7WUFFSCxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVM7Ozs7WUFBQyxVQUFDLE1BQU07Z0JBQzVDLElBQUksTUFBTSxFQUFFO29CQUNWLEtBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQzFCLEtBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDO3dCQUNqQyxlQUFlLEVBQUUsS0FBSSxDQUFDLGVBQWU7d0JBQ3JDLE1BQU0sRUFBRSxNQUFNO3FCQUNmLENBQUMsQ0FBQztvQkFDSCxLQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQzt3QkFDL0IsZUFBZSxFQUFFLEtBQUksQ0FBQyxlQUFlO3dCQUNyQyxNQUFNLEVBQUUsTUFBTTtxQkFDZixDQUFDLENBQUM7b0JBQ0gsS0FBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7b0JBQ3hCLEtBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO29CQUNyRCxLQUFJLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7aUJBQzFEO1lBQ0gsQ0FBQyxFQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFFRDs7T0FFRzs7Ozs7O0lBQ0ksdUNBQU87Ozs7O0lBQWQsVUFBZSxHQUFHO1FBQWxCLGlCQW9DQzs7WUFuQ0ssTUFBVztRQUNmLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLElBQUksR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDbkIsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSTs7OztZQUFDLFVBQUMsT0FBTztnQkFDL0IsT0FBQSxLQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FDbEUsR0FBRyxDQUNKO1lBRkQsQ0FFQyxFQUNGLENBQUM7U0FDSDtRQUNELElBQUksTUFBTSxJQUFJLElBQUksRUFBRTs7Z0JBQ1osTUFBSSxHQUFHLG1CQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsRUFBVTtZQUN0RSxJQUFJLE1BQUksSUFBSSxHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDMUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDO29CQUMvQixlQUFlLEVBQUUsSUFBSSxDQUFDLGVBQWU7b0JBQ3JDLE1BQU0sUUFBQTtpQkFDUCxDQUFDLENBQUM7Z0JBQ0gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUM7b0JBQ2pDLGVBQWUsRUFBRSxJQUFJLENBQUMsZUFBZTtvQkFDckMsTUFBTSxRQUFBO2lCQUNQLENBQUMsQ0FBQztnQkFDSCxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQyxDQUFDOztvQkFDOUMsY0FBWSxHQUFxQixJQUFJLENBQUMsZ0JBQWdCO2dCQUM1RCxJQUFJLGNBQVksRUFBRTtvQkFDaEIsVUFBVTs7O29CQUFDO3dCQUNULGNBQVksQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztvQkFDeEMsQ0FBQyxHQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUNQO2FBQ0Y7U0FDRjthQUFNO1lBQ0wsR0FBRyxHQUFHLEVBQUUsQ0FBQztTQUNWO1FBRUQsT0FBTyxHQUFHLENBQUM7SUFDYixDQUFDOzs7OztJQUNNLDBDQUFVOzs7O0lBQWpCLFVBQWtCLEtBQUs7UUFBdkIsaUJBMkJDO1FBMUJDLElBQUksQ0FBQyxLQUFLO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDekIsSUFBRyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNuQixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUNELHdCQUF3QjtRQUN4QixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7O2dCQUNYLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07Ozs7WUFBQyxVQUFDLE9BQU87Z0JBQzdDLHNDQUFzQztnQkFDdEMsT0FBQSxDQUFDLG1CQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsRUFBVSxDQUFDLENBQUMsUUFBUSxDQUNqRSxLQUFLLENBQ047WUFGRCxDQUVDLEVBQ0Y7WUFDRCxJQUFJLFlBQVksQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO2dCQUM1QixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7Z0JBQ2xCLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7WUFFRCxJQUFJLFlBQVksQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO2dCQUM1QixLQUFLLENBQUMsS0FBSyxHQUFHLGdCQUFnQixDQUFDLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQTtnQkFDakIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQzFCLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7U0FDRjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUNEOzs7T0FHRzs7Ozs7O0lBQ0ksdUNBQU87Ozs7O0lBQWQsVUFBZSxLQUFLO1FBQ2xCLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMzQixDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSSx1Q0FBTzs7Ozs7SUFBZCxVQUFlLEtBQUs7UUFBcEIsaUJBU0M7UUFSQyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRTFCLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNyRCxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBRXRCLFVBQVU7OztRQUFDO1lBQ1QsS0FBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUM7SUFDUixDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSSxzQ0FBTTs7Ozs7SUFBYixVQUFjLEtBQUs7UUFBbkIsaUJBTUM7UUFMQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRXpCLFVBQVU7OztRQUFDO1lBQ1QsS0FBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQixDQUFDLEdBQUUsQ0FBQyxDQUFDLENBQUM7SUFDUixDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSSx1Q0FBTzs7Ozs7SUFBZCxVQUFlLEtBQUs7UUFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUU7WUFDdEIsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FDakMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQzVDLENBQUM7U0FDSDtJQUNILENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNJLHNDQUFNOzs7OztJQUFiLFVBQWMsZ0JBQWdCO1FBQzVCLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ3pDLE9BQU8sRUFBRSxDQUFDO1NBQ1g7UUFDRCxJQUFJLGdCQUFnQixDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDakMsT0FBTyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbkM7UUFDRCxPQUFPLGdCQUFnQixDQUFDO0lBQzFCLENBQUM7SUFFRDs7O09BR0c7Ozs7OztJQUNJLGtEQUFrQjs7Ozs7SUFBekIsVUFBMEIsVUFBVTtRQUNsQyxPQUFPLFVBQVUsQ0FBQyxPQUFPLENBQUMsa0JBQWtCOzs7O1FBQUUsVUFBVSxLQUFLOztnQkFDdkQsR0FBRyxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSTtZQUNwQyxPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEMsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSSx5Q0FBUzs7Ozs7SUFBaEIsVUFBaUIsVUFBVTs7WUFDckIsSUFBSSxHQUFHLFlBQVk7UUFDdkIsSUFBSSxJQUFJLDRCQUE0QixDQUFDO1FBQ3JDLElBQUksSUFBSSw0QkFBNEIsQ0FBQztRQUNyQyxJQUFJLElBQUksbUJBQW1CLENBQUM7UUFDNUIsSUFBSSxJQUFJLDBEQUEwRCxDQUFDOztZQUMvRCxPQUFPLEdBQUcsSUFBSSxLQUFLLENBQ3JCLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLEVBQ0osSUFBSSxFQUNKLElBQUksRUFDSixJQUFJLENBQ0w7O1lBRUcsSUFBSSxHQUFHLFlBQVk7UUFDdkIsSUFBSSxJQUFJLDRCQUE0QixDQUFDO1FBQ3JDLElBQUksSUFBSSw0QkFBNEIsQ0FBQztRQUNyQyxJQUFJLElBQUksa0JBQWtCLENBQUM7UUFDM0IsSUFBSTtZQUNGLDBEQUEwRCxDQUFDOztZQUN6RCxPQUFPLEdBQUcsSUFBSSxLQUFLLENBQ3JCLEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLEVBQ0gsR0FBRyxFQUNILEdBQUcsRUFDSCxHQUFHLENBQ0o7O1lBRUcsR0FBRyxHQUFHLEVBQUU7UUFDWixPQUFPO1FBQ1AsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7O2dCQUNuQyxHQUFHLEdBQUcsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztZQUNyQyxVQUFVLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbEQ7UUFDRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTs7Z0JBQ3RDLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzs7Z0JBQzdCLEdBQUcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7WUFDakMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUM5QyxHQUFHLElBQUksTUFBTSxDQUFDO1NBQ2Y7UUFDRCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7O2dCQXhZRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGlCQUFpQjtvQkFDM0IsbWhJQUErQzs7aUJBRWhEOzs7O2dCQVZRLGdCQUFnQjtnQkFGaEIsU0FBUztnQkFLVCxjQUFjO2dCQUNkLGlCQUFpQjs7O3VDQVV2QixLQUFLOztJQWlZUiw0QkFBQztDQUFBLEFBellELENBTVUsV0FBVyxHQW1ZcEI7U0FwWVkscUJBQXFCOzs7SUFHaEMscURBQThDOztJQUM5QyxvQ0FBNkI7Ozs7O0lBRzNCLGlEQUE0Qzs7Ozs7SUFDNUMsdUNBQTJCOzs7OztJQUMzQiwrQ0FBd0M7Ozs7O0lBQ3hDLGtEQUE4QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIE9uSW5pdCxcclxuICBPbkNoYW5nZXMsXHJcbiAgSW5wdXQsXHJcbn0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcclxuaW1wb3J0IHsgU0hDdGxDb21tb24gfSBmcm9tIFwiLi4vc2gtY3RsLWNvbW1vblwiO1xyXG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWxcIjtcclxuaW1wb3J0IHsgU0hGb3JtUG9wdXAgfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL1NoRm9ybVBvcHVwXCI7XHJcbmltcG9ydCB7IFNtcGxQb3B1cFNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvc21wbC1wb3B1cC5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFNIQ3RsUG9wdXBEaWFsb2dDb21wb25lbnQgfSBmcm9tIFwiLi4vc2gtY3RsLXBvcHVwLWRpYWxvZy9zaC1jdGwtcG9wdXAtZGlhbG9nLmNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBTaEN0bENvbnN0IH0gZnJvbSBcIi4uLy4uL2NvbnN0U2hDdGxcIjtcclxuaW1wb3J0IHsgQmluZEN0bFNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYmluZC1jdGwuc2VydmljZVwiO1xyXG5pbXBvcnQgeyBMb2NrU2NyZWVuU2VydmljZSB9IGZyb20gXCIuLi8uLi9zZXJ2aWNlcy9sb2NrLXNjcmVlbi5zZXJ2aWNlXCI7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogXCJzaC1jdGwtanl1LWNvZGVcIixcclxuICB0ZW1wbGF0ZVVybDogXCIuL3NoLWN0bC1qeXUtY29kZS5jb21wb25lbnQuaHRtbFwiLFxyXG4gIHN0eWxlVXJsczogW1wiLi9zaC1jdGwtanl1LWNvZGUuY29tcG9uZW50LmNzc1wiLCBcIi4uLy4uLy4uL3N0eWxlLmNvbW1vbi5jc3NcIl0sXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTSEN0bEp5dUNvZGVDb21wb25lbnRcclxuICBleHRlbmRzIFNIRm9ybVBvcHVwXHJcbiAgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgQElucHV0KCkgZW5hYmxlZEhhbGZLYW5hSW5wdXQ6IGJvb2xlYW4gPSB0cnVlO1xyXG4gIHB1YmxpYyBvYmogPSBcIi5TSEN0bEp5dUNvZGVcIjtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcm90ZWN0ZWQgc21wbFBvcHVwU2VydmljZTogU21wbFBvcHVwU2VydmljZSxcclxuICAgIHByb3RlY3RlZCBkaWFsb2c6IE1hdERpYWxvZyxcclxuICAgIHByb3RlY3RlZCBiaW5kQ3RsU2VydmljZTogQmluZEN0bFNlcnZpY2UsXHJcbiAgICBwcm90ZWN0ZWQgbG9ja1NjcmVlblNlcnZpY2U6IExvY2tTY3JlZW5TZXJ2aWNlXHJcbiAgKSB7XHJcbiAgICBzdXBlcihzbXBsUG9wdXBTZXJ2aWNlLCBkaWFsb2csIGJpbmRDdGxTZXJ2aWNlLCBsb2NrU2NyZWVuU2VydmljZSk7XHJcbiAgICB0aGlzLmN0bE5hbWUgPSBcIlNIQ3RsSnl1Q29kZVwiO1xyXG4gICAgdGhpcy5tYXhsZW5ndGggPSA2O1xyXG4gIH1cclxuXHJcbiAgIC8qKlxyXG4gICAqIOOCs+ODs+ODneODvOODjeODs+ODiOOBq+WApOOBjOODkOOCpOODs+ODieOBleOCjOOBn+W+jOOBp+WRvOOBs+WHuuOBleOCjOOCi1xyXG4gICAqIOODl+ODreODkeODhuOCo+OBruWIneacn+WMllxyXG4gICAqL1xyXG4gIHB1YmxpYyBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMub25Jbml0KCk7XHJcbiAgICBpZiAodGhpcy5wb3B1cFdpZHRoKSB7XHJcbiAgICAgIHRoaXMuZXh0ZW5kV2lkdGggPSB0aGlzLnBvcHVwV2lkdGg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbklucHV0XHJcbiAgICogQHBhcmFtIGV2ZW50IGlucHV0XHJcbiAgICovXHJcbiAgcHVibGljIG9uSW5wdXQoZXZlbnQpIHtcclxuICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZS5yZXBsYWNlKC9bXjAtOV0vZywgXCJcIik7XHJcbiAgICBTSEN0bENvbW1vbi5zbGljZUxlbmd0aChldmVudCwgdGhpcy5tYXhsZW5ndGgpO1xyXG4gICAgaWYgKCF0aGlzLmVuYWJsZWRIYWxmS2FuYUlucHV0KSB7XHJcbiAgICAgIFNIQ3RsQ29tbW9uLnJlcGxhY2VGdWxsV2lkdGgoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlLnJlcGxhY2UoXHJcbiAgICAgIC9bXCLvvIHigJ3vvIPvvITvvIXvvIbigJnvvIjvvInvvJ3vvZ7vvZzigJjvvZvvvIvvvIrvvZ3vvJzvvJ7vvJ/vvL/vvI3vvL7vv6XvvKDjgIzvvJvvvJrjgI3jgIHjgILjg7tcIl0vZyxcclxuICAgICAgXCJcIlxyXG4gICAgKTtcclxuICAgIGlmIChcclxuICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlLmxlbmd0aCA+PSA2ICYmXHJcbiAgICAgIGV2ZW50LmlucHV0VHlwZSAhPSBcImRlbGV0ZUNvbnRlbnRCYWNrd2FyZFwiXHJcbiAgICApIHtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGlzTmFOKHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZSkpICYmXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlLmxlbmd0aCAhPSA3XHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQuaW5wdXRUeXBlICE9PSBcImluc2VydENvbXBvc2l0aW9uVGV4dFwiKSB7XHJcbiAgICAgIFNIQ3RsQ29tbW9uLnJlcGxhY2VTcGFjZShldmVudCk7XHJcbiAgICAgIFNIQ3RsQ29tbW9uLnJlcGxhY2VTaWduKGV2ZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIG9uQ2hhbmdlXHJcbiAgICogQHBhcmFtIGV2ZW50IGNoYW5nZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkNoYW5nZShldmVudCkge1xyXG4gICAgdGhpcy5vbkJlZm9yZUNoYW5nZShldmVudCk7XHJcbiAgICBsZXQgZmxnID0gZmFsc2U7XHJcbiAgICBpZiAodGhpcy5ub0NoYW5nZUZsZyA9PSBgT0ZGYCkge1xyXG4gICAgICBmbGcgPSB0cnVlO1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5TbXBsUG9wdXBTZXJ2aWNlLmdldE1hc3RlckRhdGEodGhpcy5hcGlVcmwpLmxlbmd0aCA9PSAwICYmXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hDb2Rlcyh0aGlzLmFwaVVybCkudGhlbigodmFsdWUpID0+IHtcclxuICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh2YWx1ZSk7XHJcbiAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSB0aGlzLnRvVGV4dChldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25BZnRlckNoYW5nZShldmVudCk7XHJcbiAgICAgICAgICB9LCAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvZGVzID0gT2JqZWN0KFxyXG4gICAgICAgICAgdGhpcy5TbXBsUG9wdXBTZXJ2aWNlLmdldE1hc3RlckRhdGEodGhpcy5hcGlVcmwpXHJcbiAgICAgICAgKS5kYXRhO1xyXG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IHRoaXMuc2V0TmFtZShldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5vbkFmdGVyQ2hhbmdlKGV2ZW50KTtcclxuICAgICAgICB9LCAwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFmbGcpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gdGhpcy5ub0NoYW5nZUZsZyA9PSBgT0ZGYDtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMubm9DaGFuZ2VGbGcgPSBgT0ZGYDtcclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICB0aGlzLm9uQWZ0ZXJDaGFuZ2UoZXZlbnQpO1xyXG4gICAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IHRoaXMudG9UZXh0KGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICAgIH0sIDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog44OA44Kk44Ki44Ot44Kw44KS6ZaL44GE44Gm6ZaJ44GY44KL5pmC44Gr5YCk44KS6Kaq44Gr6L+U44GZXHJcbiAgICovXHJcbiAgcHVibGljIG9wZW5EaWFsb2coKSB7XHJcbiAgICBsZXQgZXh0ZW5kV2lkdGg7XHJcbiAgICBpZiAodGhpcy5jb2Rlcykge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgIXRoaXMucG9wdXBXaWR0aCAmJlxyXG4gICAgICAgIHRoaXMuY29kZXMubGVuZ3RoICE9IDAgJiZcclxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuY29kZXNbMF0pLmxlbmd0aCA+PSA0XHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kV2lkdGggPSBTaEN0bENvbnN0LkRJQUxPR19NQVhfV0lEVEg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCByYXdDb2RlcztcclxuICAgICAgbGV0IHJhd0NvZGVzQXJyYXkgPSBbXTtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IHRoaXMuY29kZXMubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgcmF3Q29kZXMgPSB0aGlzLmNvZGVzW2ldLmNvbnRhY3RDb2RlO1xyXG4gICAgICAgIHJhd0NvZGVzQXJyYXkucHVzaChyYXdDb2Rlcyk7XHJcbiAgICAgICAgbGV0IGNvZGUgPSBPYmplY3QudmFsdWVzKHRoaXMuY29kZXNbaV0pXHJcbiAgICAgICAgICBbdGhpcy5iaW5kQ29sdW1uS2V5IC0gMV0udG9TdHJpbmcoKVxyXG4gICAgICAgICAgLnN1YnN0cigyKTtcclxuICAgICAgICB0aGlzLmNvZGVzW2ldLmNvbnRhY3RDb2RlID0gY29kZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oU0hDdGxQb3B1cERpYWxvZ0NvbXBvbmVudCwge1xyXG4gICAgICAgIGhlaWdodDogU2hDdGxDb25zdC5ESUFMT0dfSEVJR0hULFxyXG4gICAgICAgIHdpZHRoOiBleHRlbmRXaWR0aCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBkYXRhVGl0bGU6IHRoaXMuZGF0YVRpdGxlLFxyXG4gICAgICAgICAgY29kZXM6IHRoaXMuY29kZXMsXHJcbiAgICAgICAgICBjb2Rlc0hlYWRlcjogdGhpcy5jb2Rlc0hlYWRlcixcclxuICAgICAgICAgIGhpZGRlbkNvbHVtbnM6IHRoaXMuaGlkZGVuQ29sdW1ucyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuZGlhbG9nUmVmLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKChyZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICB0aGlzLnNldFZhbHVlTmFtZShyZXN1bHQpO1xyXG4gICAgICAgICAgdGhpcy5iaW5kQ3RsU2VydmljZS5zZXROb0NoYW5nZUZsZyh7XHJcbiAgICAgICAgICAgIGJpbmRDb2x1bW5BcnJheTogdGhpcy5iaW5kQ29sdW1uQXJyYXksXHJcbiAgICAgICAgICAgIHJlY29yZDogcmVzdWx0LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB0aGlzLmJpbmRDdGxTZXJ2aWNlLnNldEJpbmRWYWx1ZSh7XHJcbiAgICAgICAgICAgIGJpbmRDb2x1bW5BcnJheTogdGhpcy5iaW5kQ29sdW1uQXJyYXksXHJcbiAgICAgICAgICAgIHJlY29yZDogcmVzdWx0LFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB0aGlzLm5vQ2hhbmdlRmxnID0gYE9OYDtcclxuICAgICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdCh0aGlzLmV4dHJhY3RCaW5kVmFsdWUocmVzdWx0KSk7XHJcbiAgICAgICAgICB0aGlzLm93blZhbHVlSW5wdXRFbG0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDpgbjmip7jgZXjgozjgZ/ljLrliIbjgrPjg7zjg4njgavntJDjgaXjgY/ljLrliIblkI3jgpLoqK3lrppcclxuICAgKi9cclxuICBwdWJsaWMgc2V0TmFtZSh2YWwpIHtcclxuICAgIGxldCByZWNvcmQ6IGFueTtcclxuICAgIHZhbCA9IHRoaXMudG9UZXh0KHZhbCk7XHJcbiAgICBpZiAodmFsLmxlbmd0aCA9PSA2KSB7XHJcbiAgICAgIHJlY29yZCA9IHRoaXMuY29kZXMuZmluZCgoZWxlbWVudCkgPT5cclxuICAgICAgICB0aGlzLnRvVGV4dChPYmplY3QudmFsdWVzKGVsZW1lbnQpW3RoaXMuYmluZENvbHVtbktleSAtIDFdKS5pbmNsdWRlcyhcclxuICAgICAgICAgIHZhbFxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmIChyZWNvcmQgIT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBuYW1lID0gT2JqZWN0LnZhbHVlcyhyZWNvcmQpW3RoaXMuYmluZENvbHVtblZhbHVlIC0gMV0gYXMgc3RyaW5nO1xyXG4gICAgICBpZiAobmFtZSAmJiB2YWwubGVuZ3RoID09IDYpIHtcclxuICAgICAgICB0aGlzLnNldFZhbHVlTmFtZShyZWNvcmQpO1xyXG4gICAgICAgIHRoaXMubm9DaGFuZ2VGbGcgPSBcIk9OXCI7XHJcbiAgICAgICAgdGhpcy5iaW5kQ3RsU2VydmljZS5zZXRCaW5kVmFsdWUoe1xyXG4gICAgICAgICAgYmluZENvbHVtbkFycmF5OiB0aGlzLmJpbmRDb2x1bW5BcnJheSxcclxuICAgICAgICAgIHJlY29yZCxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmJpbmRDdGxTZXJ2aWNlLnNldE5vQ2hhbmdlRmxnKHtcclxuICAgICAgICAgIGJpbmRDb2x1bW5BcnJheTogdGhpcy5iaW5kQ29sdW1uQXJyYXksXHJcbiAgICAgICAgICByZWNvcmQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFsID0gT2JqZWN0LnZhbHVlcyhyZWNvcmQpW3RoaXMuYmluZENvbHVtbktleSAtIDFdO1xyXG4gICAgICAgIGNvbnN0IGlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudCA9IHRoaXMub3duVmFsdWVJbnB1dEVsbTtcclxuICAgICAgICBpZiAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gdGhpcy50b1RleHQodmFsKTtcclxuICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsID0gYGA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbDtcclxuICB9XHJcbiAgcHVibGljIGNoZWNrVmFsdWUodmFsdWUpIHtcclxuICAgIGlmICghdmFsdWUpIHJldHVybiBmYWxzZTtcclxuICAgIGlmKHZhbHVlLmxlbmd0aCA8IDYpIHtcclxuICAgICAgdGhpcy5jbGVhclZhbHVlKCk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vbGV0IG1hdGNoZWRBcnJheSA9IFtdO1xyXG4gICAgaWYgKHRoaXMuY29kZXNbMF0pIHtcclxuICAgICAgY29uc3QgZmlsdGVyUmVzdWx0ID0gdGhpcy5jb2Rlcy5maWx0ZXIoKGVsZW1lbnQpID0+XHJcbiAgICAgICAgLy90aGlzLmhhc01hdGNoUmVjb3JkcyhlbGVtZW50LCB2YWx1ZSlcclxuICAgICAgICAoT2JqZWN0LnZhbHVlcyhlbGVtZW50KVt0aGlzLmJpbmRDb2x1bW5LZXkgLSAxXSBhcyBzdHJpbmcpLmluY2x1ZGVzKFxyXG4gICAgICAgICAgdmFsdWVcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChmaWx0ZXJSZXN1bHQubGVuZ3RoID09IDApIHtcclxuICAgICAgICB0aGlzLmNsZWFyVmFsdWUoKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChmaWx0ZXJSZXN1bHQubGVuZ3RoID49IDIpIHtcclxuICAgICAgICBhbGVydCh2YWx1ZSArIFwi44Gr6KSH5pWw44Gu5YCZ6KOc44GM5qSc5Ye644GV44KM44G+44GX44GfXCIpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJWYWx1ZSgpXHJcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KFwiXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIG9uQ2xpY2tcclxuICAgKiBAcGFyYW0gZXZlbnQgY2xpY2tcclxuICAgKi9cclxuICBwdWJsaWMgb25DbGljayhldmVudCkge1xyXG4gICAgdGhpcy5vbkJlZm9yZUNsaWNrKGV2ZW50KTtcclxuXHJcbiAgICB0aGlzLm9uQWZ0ZXJDbGljayhldmVudCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkZvY3VzXHJcbiAgICogQHBhcmFtIGV2ZW50IGZvY3VzXHJcbiAgICovXHJcbiAgcHVibGljIG9uRm9jdXMoZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVGb2N1cyhldmVudCk7XHJcblxyXG4gICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gdGhpcy50b1RleHQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgIGV2ZW50LnRhcmdldC5zZWxlY3QoKTtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5vbkFmdGVyRm9jdXMoZXZlbnQpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbkJsdXJcclxuICAgKiBAcGFyYW0gZXZlbnQgYmx1clxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbkJsdXIoZXZlbnQpIHtcclxuICAgIHRoaXMub25CZWZvcmVCbHVyKGV2ZW50KTtcclxuICAgIFxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMub25BZnRlckJsdXIoZXZlbnQpO1xyXG4gICAgfSwgMCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBvbktleVVwXHJcbiAgICogQHBhcmFtIGV2ZW50IEtleVVwXHJcbiAgICovXHJcbiAgcHVibGljIG9uS2V5VXAoZXZlbnQpIHtcclxuICAgIGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcclxuICAgICAgZXZlbnQudGFyZ2V0LnZhbHVlID0gdGhpcy50b0hhbmtha3UoXHJcbiAgICAgICAgdGhpcy5oaXJhZ2FuYVRvS2F0YWdhbmEoZXZlbnQudGFyZ2V0LnZhbHVlKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YWI6aCt6Zmk5Y67XHJcbiAgICogQHBhcmFtIGlucHV0VGFyZ2V0VmFsdWUgZXZlbnQudGFyZ2V0LnZhbHVlXHJcbiAgICovXHJcbiAgcHVibGljIHRvVGV4dChpbnB1dFRhcmdldFZhbHVlKSB7XHJcbiAgICBpZiAoU0hDdGxDb21tb24uaXNCbGFuayhpbnB1dFRhcmdldFZhbHVlKSkge1xyXG4gICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICAgIGlmIChpbnB1dFRhcmdldFZhbHVlLmxlbmd0aCA9PT0gOCkge1xyXG4gICAgICByZXR1cm4gaW5wdXRUYXJnZXRWYWx1ZS5zdWJzdHIoMik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5wdXRUYXJnZXRWYWx1ZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOOBsuOCieOBjOOBquOCkuOCq+OCv+OCq+ODiuOBq+WkieaPm1xyXG4gICAqIEBwYXJhbSBpbnB1dFZhbHVlXHJcbiAgICovXHJcbiAgcHVibGljIGhpcmFnYW5hVG9LYXRhZ2FuYShpbnB1dFZhbHVlKSB7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZS5yZXBsYWNlKC9bXFx1MzA0MS1cXHUzMDk2XS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgdmFyIGNociA9IG1hdGNoLmNoYXJDb2RlQXQoMCkgKyAweDYwO1xyXG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjaHIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlhaXlipvmloflrZfjgpLljYrop5Ljgqvjg4rjgavlpInmj5tcclxuICAgKiBAcGFyYW0gaW5wdXRWYWx1ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyB0b0hhbmtha3UoaW5wdXRWYWx1ZSkge1xyXG4gICAgbGV0IGhhbGYgPSBcIjAxMjM0NTY3ODlcIjtcclxuICAgIGhhbGYgKz0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG4gICAgaGFsZiArPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XHJcbiAgICBoYWxmICs9IFwi772h772k772iXFxcXO+9ozs6772lLSt8X0AuLCBcIjtcclxuICAgIGhhbGYgKz0gXCLvvbHvvbLvvbPvvbTvvbXvvbbvvbfvvbjvvbnvvbrvvbvvvbzvvb3vvb7vvb/vvoDvvoHvvoLvvoPvvoTvvoXvvobvvofvvojvvonvvorvvovvvozvvo3vvo7vvo/vvpDvvpHvvpLvvpPvvpTvvpXvvpbvvpfvvpjvvpnvvprvvpvvvpzvvabvvp3vvafvvajvvanvvarvvavvva/vvazvva3vva7vvbBcIjtcclxuICAgIGxldCBoYWxmQXJyID0gbmV3IEFycmF5KFxyXG4gICAgICBcIu+9s+++nlwiLFxyXG4gICAgICBcIu+9tu++nlwiLFxyXG4gICAgICBcIu+9t+++nlwiLFxyXG4gICAgICBcIu+9uO++nlwiLFxyXG4gICAgICBcIu+9ue++nlwiLFxyXG4gICAgICBcIu+9uu++nlwiLFxyXG4gICAgICBcIu+9u+++nlwiLFxyXG4gICAgICBcIu+9vO++nlwiLFxyXG4gICAgICBcIu+9ve++nlwiLFxyXG4gICAgICBcIu+9vu++nlwiLFxyXG4gICAgICBcIu+9v+++nlwiLFxyXG4gICAgICBcIu++gO++nlwiLFxyXG4gICAgICBcIu++ge++nlwiLFxyXG4gICAgICBcIu++gu++nlwiLFxyXG4gICAgICBcIu++g+++nlwiLFxyXG4gICAgICBcIu++hO++nlwiLFxyXG4gICAgICBcIu++iu++nlwiLFxyXG4gICAgICBcIu++i+++nlwiLFxyXG4gICAgICBcIu++jO++nlwiLFxyXG4gICAgICBcIu++je++nlwiLFxyXG4gICAgICBcIu++ju++nlwiLFxyXG4gICAgICBcIu++iu++n1wiLFxyXG4gICAgICBcIu++i+++n1wiLFxyXG4gICAgICBcIu++jO++n1wiLFxyXG4gICAgICBcIu++je++n1wiLFxyXG4gICAgICBcIu++ju++n1wiXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBmdWxsID0gXCLvvJDvvJHvvJLvvJPvvJTvvJXvvJbvvJfvvJjvvJlcIjtcclxuICAgIGZ1bGwgKz0gXCLvvKHvvKLvvKPvvKTvvKXvvKbvvKfvvKjvvKnvvKrvvKvvvKzvvK3vvK7vvK/vvLDvvLHvvLLvvLPvvLTvvLXvvLbvvLfvvLjvvLnvvLpcIjtcclxuICAgIGZ1bGwgKz0gXCLvvYHvvYLvvYPvvYTvvYXvvYbvvYfvvYjvvYnvvYrvvYvvvYzvvY3vvY7vvY/vvZDvvZHvvZLvvZPvvZTvvZXvvZbvvZfvvZjvvZnvvZpcIjtcclxuICAgIGZ1bGwgKz0gXCLjgILjgIHjgIzvv6XjgI3vvJvvvJrjg7vvvI3vvIvvvZzvvL/vvKDvvI7vvIzjgIBcIjtcclxuICAgIGZ1bGwgKz1cclxuICAgICAgXCLjgqLjgqTjgqbjgqjjgqrjgqvjgq3jgq/jgrHjgrPjgrXjgrfjgrnjgrvjgr3jgr/jg4Hjg4Tjg4bjg4jjg4rjg4vjg4zjg43jg47jg4/jg5Ljg5Xjg5jjg5vjg57jg5/jg6Djg6Hjg6Ljg6Tjg6bjg6jjg6njg6rjg6vjg6zjg63jg6/jg7Ljg7PjgqHjgqPjgqXjgqfjgqnjg4Pjg6Pjg6Xjg6fjg7xcIjtcclxuICAgIGxldCBmdWxsQXJyID0gbmV3IEFycmF5KFxyXG4gICAgICBcIuODtFwiLFxyXG4gICAgICBcIuOCrFwiLFxyXG4gICAgICBcIuOCrlwiLFxyXG4gICAgICBcIuOCsFwiLFxyXG4gICAgICBcIuOCslwiLFxyXG4gICAgICBcIuOCtFwiLFxyXG4gICAgICBcIuOCtlwiLFxyXG4gICAgICBcIuOCuFwiLFxyXG4gICAgICBcIuOCulwiLFxyXG4gICAgICBcIuOCvFwiLFxyXG4gICAgICBcIuOCvlwiLFxyXG4gICAgICBcIuODgFwiLFxyXG4gICAgICBcIuODglwiLFxyXG4gICAgICBcIuODhVwiLFxyXG4gICAgICBcIuODh1wiLFxyXG4gICAgICBcIuODiVwiLFxyXG4gICAgICBcIuODkFwiLFxyXG4gICAgICBcIuODk1wiLFxyXG4gICAgICBcIuODllwiLFxyXG4gICAgICBcIuODmVwiLFxyXG4gICAgICBcIuODnFwiLFxyXG4gICAgICBcIuODkVwiLFxyXG4gICAgICBcIuODlFwiLFxyXG4gICAgICBcIuODl1wiLFxyXG4gICAgICBcIuODmlwiLFxyXG4gICAgICBcIuODnVwiXHJcbiAgICApO1xyXG5cclxuICAgIGxldCBzdHIgPSBcIlwiO1xyXG4gICAgLy/ljYrop5Ljgqvjg4rnlKhcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGFsZkFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgcmVnID0gbmV3IFJlZ0V4cChmdWxsQXJyW2ldLCBcImdcIik7XHJcbiAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnJlcGxhY2UocmVnLCBoYWxmQXJyW2ldKTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRWYWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICBsZXQgb25lU3RyID0gaW5wdXRWYWx1ZS5jaGFyQXQoaSk7XHJcbiAgICAgIGxldCBudW0gPSBmdWxsLmluZGV4T2Yob25lU3RyLCAwKTtcclxuICAgICAgb25lU3RyID0gbnVtID49IDAgPyBoYWxmLmNoYXJBdChudW0pIDogb25lU3RyO1xyXG4gICAgICBzdHIgKz0gb25lU3RyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0cjtcclxuICB9XHJcbn1cclxuIl19